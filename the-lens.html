<!DOCTYPE html>
<html lang="en-GB" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Lens | The Employee Playbook</title>

  <!-- FAVICON -->
  <link rel="icon" type="image/x-icon" href="assets/img/favicon.png">
  <link rel="icon" type="image/png" href="assets/img/favicon.png">

  <!-- THEME PRELOAD (prevents flash + keeps toggle consistent) -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('theme'); // "dark" | "light" | null
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const useDark = saved ? saved === 'dark' : prefersDark;
        if (useDark) document.documentElement.classList.add('dark-mode');
      } catch (e) {}
    })();
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary-white: #FFFFFF;
      --light-gray: #F8F9FA;
      --medium-gray: #E9ECEF;
      --dark-gray: #6C757D;
      --text-dark: #212529;
      --text-medium: #495057;

      --accent-purple: #7B5FC4;
      --accent-purple-dark: #5A4496;
      --light-purple: #E6E0F5;
      --lighter-purple: #F0EBFA;

      --border-light: rgba(0, 0, 0, 0.08);
      --hero-gray: #f5f7fa;
      --nav-bg: rgba(255, 255, 255, 0.95);
      --sidebar-bg: #fafbfc;
      --chat-bg: #ffffff;

      --online-green: #10B981;
      --hero-purple: #5A4496;

      --user-msg-bg: #7B5FC4;
      --bot-msg-bg: #F1F3F9;

      --shadow: 0 2px 8px rgba(0,0,0,0.08);

      --premium-gradient: linear-gradient(135deg, #7B5FC4 0%, #5A4496 100%);
      --premium-card-shadow: 0 10px 30px rgba(123, 95, 196, 0.10);
      --neutral-bg: #F8F9FA;

      --crisis-red: #FF6B6B;
      --urgent-red: #EF4444;
      --urgent-red-soft: rgba(239, 68, 68, 0.10);

      --yes-green: #10B981;
      --no-red: #EF4444;

      /* ===========================
         CATEGORY COLOURS + PILL SYSTEM (from your reference)
      =========================== */
      --category-clarity: #7B5FC4;
      --category-burnout: #f59e0b;
      --category-manager: #10b981;
      --category-politics: #3b82f6;
      --category-hr: #6D28D9;
      --category-confidence: #ef4444;
      --category-career: #800020;

      --pill-clarity-bg: linear-gradient(135deg, rgba(123, 95, 196, 0.06), rgba(123, 95, 196, 0.03));
      --pill-clarity-border: rgba(123, 95, 196, 0.20);
      --pill-clarity-hover-bg: linear-gradient(135deg, rgba(123, 95, 196, 0.10), rgba(123, 95, 196, 0.06));
      --pill-clarity-hover-border: rgba(123, 95, 196, 0.28);

      --pill-burnout-bg: linear-gradient(135deg, rgba(245, 158, 11, 0.06), rgba(245, 158, 11, 0.03));
      --pill-burnout-border: rgba(245, 158, 11, 0.20);
      --pill-burnout-hover-bg: linear-gradient(135deg, rgba(245, 158, 11, 0.10), rgba(245, 158, 11, 0.06));
      --pill-burnout-hover-border: rgba(245, 158, 11, 0.28);

      --pill-manager-bg: linear-gradient(135deg, rgba(16, 185, 129, 0.06), rgba(16, 185, 129, 0.03));
      --pill-manager-border: rgba(16, 185, 129, 0.20);
      --pill-manager-hover-bg: linear-gradient(135deg, rgba(16, 185, 129, 0.10), rgba(16, 185, 129, 0.06));
      --pill-manager-hover-border: rgba(16, 185, 129, 0.28);

      --pill-politics-bg: linear-gradient(135deg, rgba(59, 130, 246, 0.06), rgba(59, 130, 246, 0.03));
      --pill-politics-border: rgba(59, 130, 246, 0.20);
      --pill-politics-hover-bg: linear-gradient(135deg, rgba(59, 130, 246, 0.10), rgba(59, 130, 246, 0.06));
      --pill-politics-hover-border: rgba(59, 130, 246, 0.28);

      --pill-hr-bg: linear-gradient(135deg, rgba(109, 40, 217, 0.06), rgba(109, 40, 217, 0.03));
      --pill-hr-border: rgba(109, 40, 217, 0.20);
      --pill-hr-hover-bg: linear-gradient(135deg, rgba(109, 40, 217, 0.10), rgba(109, 40, 217, 0.06));
      --pill-hr-hover-border: rgba(109, 40, 217, 0.28);

      --pill-confidence-bg: linear-gradient(135deg, rgba(239, 68, 68, 0.06), rgba(239, 68, 68, 0.03));
      --pill-confidence-border: rgba(239, 68, 68, 0.20);
      --pill-confidence-hover-bg: linear-gradient(135deg, rgba(239, 68, 68, 0.10), rgba(239, 68, 68, 0.06));
      --pill-confidence-hover-border: rgba(239, 68, 68, 0.28);

      --pill-career-bg: linear-gradient(135deg, rgba(128, 0, 32, 0.06), rgba(128, 0, 32, 0.03));
      --pill-career-border: rgba(128, 0, 32, 0.20);
      --pill-career-hover-bg: linear-gradient(135deg, rgba(128, 0, 32, 0.10), rgba(128, 0, 32, 0.06));
      --pill-career-hover-border: rgba(128, 0, 32, 0.28);
    }

    html.dark-mode {
      --primary-white: #121212;
      --light-gray: #1E1E1E;
      --medium-gray: #2D2D2D;
      --dark-gray: #8A8A8A;
      --text-dark: #F5F5F5;
      --text-medium: #CCCCCC;

      --accent-purple: #8B6CE6;
      --accent-purple-dark: #6A4FC4;
      --light-purple: #2A1E4A;
      --lighter-purple: #1E1A2E;

      --border-light: rgba(255, 255, 255, 0.08);
      --hero-gray: #1a1a1a;
      --nav-bg: rgba(18, 18, 18, 0.95);
      --sidebar-bg: #1a1a1a;
      --chat-bg: #1e1e1e;

      --user-msg-bg: #8B6CE6;
      --bot-msg-bg: #2D2D2D;

      --shadow: 0 2px 10px rgba(0,0,0,0.22);
      --premium-card-shadow: 0 14px 34px rgba(0, 0, 0, 0.28);

      --neutral-bg: #1E1E1E;
      --crisis-red: #FF5252;

      --urgent-red: #F87171;
      --urgent-red-soft: rgba(248, 113, 113, 0.14);

      --yes-green: #34D399;
      --no-red: #F87171;

      /* Dark mode category variants (from your reference) */
      --category-clarity: #9d86e9;
      --category-burnout: #fbbf24;
      --category-manager: #34d399;
      --category-politics: #60a5fa;
      --category-hr: #8B5CF6;
      --category-confidence: #f87171;
      --category-career: #B03060;

      --pill-clarity-bg: linear-gradient(135deg, rgba(157, 134, 233, 0.14), rgba(157, 134, 233, 0.08));
      --pill-clarity-border: rgba(157, 134, 233, 0.32);
      --pill-clarity-hover-bg: linear-gradient(135deg, rgba(157, 134, 233, 0.18), rgba(157, 134, 233, 0.12));
      --pill-clarity-hover-border: rgba(157, 134, 233, 0.42);

      --pill-burnout-bg: linear-gradient(135deg, rgba(251, 191, 36, 0.14), rgba(251, 191, 36, 0.08));
      --pill-burnout-border: rgba(251, 191, 36, 0.32);
      --pill-burnout-hover-bg: linear-gradient(135deg, rgba(251, 191, 36, 0.18), rgba(251, 191, 36, 0.12));
      --pill-burnout-hover-border: rgba(251, 191, 36, 0.42);

      --pill-manager-bg: linear-gradient(135deg, rgba(52, 211, 153, 0.14), rgba(52, 211, 153, 0.08));
      --pill-manager-border: rgba(52, 211, 153, 0.32);
      --pill-manager-hover-bg: linear-gradient(135deg, rgba(52, 211, 153, 0.18), rgba(52, 211, 153, 0.12));
      --pill-manager-hover-border: rgba(52, 211, 153, 0.42);

      --pill-politics-bg: linear-gradient(135deg, rgba(96, 165, 250, 0.14), rgba(96, 165, 250, 0.08));
      --pill-politics-border: rgba(96, 165, 250, 0.32);
      --pill-politics-hover-bg: linear-gradient(135deg, rgba(96, 165, 250, 0.18), rgba(96, 165, 250, 0.12));
      --pill-politics-hover-border: rgba(96, 165, 250, 0.42);

      --pill-hr-bg: linear-gradient(135deg, rgba(139, 92, 246, 0.14), rgba(139, 92, 246, 0.08));
      --pill-hr-border: rgba(139, 92, 246, 0.32);
      --pill-hr-hover-bg: linear-gradient(135deg, rgba(139, 92, 246, 0.18), rgba(139, 92, 246, 0.12));
      --pill-hr-hover-border: rgba(139, 92, 246, 0.42);

      --pill-confidence-bg: linear-gradient(135deg, rgba(248, 113, 113, 0.14), rgba(248, 113, 113, 0.08));
      --pill-confidence-border: rgba(248, 113, 113, 0.32);
      --pill-confidence-hover-bg: linear-gradient(135deg, rgba(248, 113, 113, 0.18), rgba(248, 113, 113, 0.12));
      --pill-confidence-hover-border: rgba(248, 113, 113, 0.42);

      --pill-career-bg: linear-gradient(135deg, rgba(176, 48, 96, 0.14), rgba(176, 48, 96, 0.08));
      --pill-career-border: rgba(176, 48, 96, 0.32);
      --pill-career-hover-bg: linear-gradient(135deg, rgba(176, 48, 96, 0.18), rgba(176, 48, 96, 0.12));
      --pill-career-hover-border: rgba(176, 48, 96, 0.42);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    html { scroll-behavior: smooth; }

    body {
      background-color: var(--primary-white);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
      transition: background-color 0.3s ease, color 0.3s ease;
      opacity: 0;
    }
    body.loaded { opacity: 1; }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
    }

    section { padding: 80px 0; }

    /* ===========================
       CATEGORY PILLS (premium)
       (Reduced size)
    =========================== */
    .category-pill {
      display: inline-flex;
      align-items: center;
      gap: 7px;
      padding: 5px 10px;
      border-radius: 12px;
      font-size: 10.8px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.55px;
      border: 1px solid transparent;
      background: var(--primary-white);
      height: 30px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.18s ease;
      cursor: default;
      white-space: nowrap;
      text-decoration: none;
      color: var(--text-dark);
      user-select: none;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    html.dark-mode .category-pill { box-shadow: 0 1px 2px rgba(0,0,0,0.28); }

    .category-pill .category-icon { font-size: 11px; opacity: 0.95; flex-shrink: 0; }

    .category-pill.clarity { color: var(--category-clarity); border-color: var(--pill-clarity-border); background: var(--pill-clarity-bg); }
    .category-pill.clarity:hover { background: var(--pill-clarity-hover-bg); border-color: var(--pill-clarity-hover-border); box-shadow: 0 4px 12px rgba(123,95,196,0.10); }

    .category-pill.burnout { color: var(--category-burnout); border-color: var(--pill-burnout-border); background: var(--pill-burnout-bg); }
    .category-pill.burnout:hover { background: var(--pill-burnout-hover-bg); border-color: var(--pill-burnout-hover-border); box-shadow: 0 4px 12px rgba(245,158,11,0.10); }

    .category-pill.manager { color: var(--category-manager); border-color: var(--pill-manager-border); background: var(--pill-manager-bg); }
    .category-pill.manager:hover { background: var(--pill-manager-hover-bg); border-color: var(--pill-manager-hover-border); box-shadow: 0 4px 12px rgba(16,185,129,0.10); }

    .category-pill.politics { color: var(--category-politics); border-color: var(--pill-politics-border); background: var(--pill-politics-bg); }
    .category-pill.politics:hover { background: var(--pill-politics-hover-bg); border-color: var(--pill-politics-hover-border); box-shadow: 0 4px 12px rgba(59,130,246,0.10); }

    .category-pill.hr { color: var(--category-hr); border-color: var(--pill-hr-border); background: var(--pill-hr-bg); }
    .category-pill.hr:hover { background: var(--pill-hr-hover-bg); border-color: var(--pill-hr-hover-border); box-shadow: 0 4px 12px rgba(109,40,217,0.10); }

    .category-pill.confidence { color: var(--category-confidence); border-color: var(--pill-confidence-border); background: var(--pill-confidence-bg); }
    .category-pill.confidence:hover { background: var(--pill-confidence-hover-bg); border-color: var(--pill-confidence-hover-border); box-shadow: 0 4px 12px rgba(239,68,68,0.10); }

    .category-pill.career { color: var(--category-career); border-color: var(--pill-career-border); background: var(--pill-career-bg); }
    .category-pill.career:hover { background: var(--pill-career-hover-bg); border-color: var(--pill-career-hover-border); box-shadow: 0 4px 12px rgba(128,0,32,0.10); }

    /* Hover overlay: sentence slides over the pill */
    .popular-topics .category-pill[data-tooltip]::after {
      content: attr(data-tooltip);
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 12px;
      background: rgba(255,255,255,0.96);
      border: 1px solid rgba(123,95,196,0.22);
      color: var(--text-dark);
      font-size: 12.5px;
      font-weight: 600;
      letter-spacing: -0.12px;
      line-height: 1.18;
      white-space: normal;
      text-transform: none;
      opacity: 0;
      transform: translateX(10px);
      transition: opacity 0.18s ease, transform 0.18s ease;
      pointer-events: none;
      box-shadow: 0 10px 20px rgba(0,0,0,0.10);
      text-align: center;
    }
    html.dark-mode .popular-topics .category-pill[data-tooltip]::after{
      background: rgba(18,18,18,0.92);
      border-color: rgba(139,108,230,0.30);
      box-shadow: 0 16px 34px rgba(0,0,0,0.35);
      color: var(--text-dark);
    }
    .popular-topics .category-pill[data-tooltip]:hover::after { opacity: 1; transform: translateX(0); }

    /* Navigation */
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      background: var(--nav-bg);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: 1000;
      border-bottom: 1px solid var(--border-light);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      transition: background-color 0.3s ease, border-color 0.3s ease;
      height: 80px;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      height: 100%;
    }

    .logo-img {
      height: 100px;
      width: auto;
      transform: translateX(20%);
      padding: 14px 10px;
      transition: all 0.3s ease;
      display: block;
      min-height: 100px;
    }

    .nav-links { display: flex; gap: 50px; }

    .nav-link {
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
      font-size: 17px;
      position: relative;
    }
    .nav-link:hover { color: var(--accent-purple); }

    .nav-link.active { color: var(--text-dark); }
    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 100%;
      height: 2px;
      background-color: var(--accent-purple);
      border-radius: 2px;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 24px;
      transform: translateX(-20%);
    }

    .sign-in {
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 500;
      font-size: 17px;
    }

    .header-cta {
      background: var(--accent-purple);
      color: white;
      padding: 8px 20px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
      box-shadow: 0 10px 20px rgba(123, 95, 196, 0.24);
    }
    .header-cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(123, 95, 196, 0.30);
      background: var(--accent-purple-dark);
    }

    .theme-toggle {
      background: none;
      border: none;
      color: var(--text-dark);
      cursor: pointer;
      font-size: 16px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }
    .theme-toggle:hover { background-color: var(--light-gray); }

    .mobile-toggle {
      display: none;
      background: none;
      border: none;
      color: var(--text-dark);
      cursor: pointer;
      font-size: 24px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }
    .mobile-toggle:hover { background-color: var(--light-gray); }

    .nav-link-container { position: relative; display: inline-block; }
    .new-tag {
      position: absolute;
      top: -12px;
      right: -35px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      font-size: 10px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.18);
      z-index: 10;
      white-space: nowrap;
    }

    .mobile-sign-in { display: none; }
    .mobile-create-account { display: none; }

    /* Mobile Create Account Tab */
    .mobile-create-account-tab {
      display: none;
      position: fixed;
      top: 15%;
      right: 0;
      background: var(--accent-purple);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 12px 0 0 12px;
      text-decoration: none;
      font-weight: 600;
      font-size: 24px;
      z-index: 999;
      box-shadow: -2px 10px 24px rgba(123, 95, 196, 0.30);
      transition: all 0.3s ease;
      align-items: center;
      justify-content: center;
      border: 2px solid white;
    }
    .mobile-create-account-tab:hover {
      transform: translateX(-3px);
      box-shadow: -3px 14px 30px rgba(123, 95, 196, 0.38);
      background: var(--accent-purple-dark);
    }
    html.dark-mode .mobile-create-account-tab { border: 2px solid var(--primary-white); }

    /* Create Account Modal */
    .create-account-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1001;
      align-items: center;
      justify-content: center;
    }
    .create-account-modal.active { display: flex; }
    .modal-content {
      background: var(--primary-white);
      width: 90%;
      max-width: 420px;
      border-radius: 18px;
      padding: 30px;
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.35);
      position: relative;
      animation: modalSlideIn 0.3s ease-out;
      border: 1px solid var(--border-light);
    }
    @keyframes modalSlideIn {
      from { opacity: 0; transform: translateY(-16px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .modal-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--text-dark);
      letter-spacing: -0.2px;
    }
    .close-modal {
      background: none;
      border: none;
      font-size: 22px;
      color: var(--dark-gray);
      cursor: pointer;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }
    .close-modal:hover { background-color: var(--light-gray); }

    .modal-form { display: flex; flex-direction: column; gap: 14px; }
    .form-group { display: flex; flex-direction: column; gap: 8px; }
    .form-label { font-weight: 500; color: var(--text-dark); font-size: 14px; }
    .form-input {
      padding: 12px 14px;
      border: 1px solid var(--medium-gray);
      border-radius: 10px;
      font-size: 14px;
      background: var(--primary-white);
      color: var(--text-dark);
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .form-input:focus {
      outline: none;
      border-color: var(--accent-purple);
      box-shadow: 0 0 0 3px rgba(123, 95, 196, 0.12);
    }
    .submit-btn {
      background: var(--accent-purple);
      color: white;
      border: none;
      padding: 13px 18px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 8px;
      box-shadow: 0 12px 26px rgba(123, 95, 196, 0.22);
    }
    .submit-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(123, 95, 196, 0.28);
      background: var(--accent-purple-dark);
    }
    .modal-footer {
      margin-top: 18px;
      text-align: center;
      font-size: 13px;
      color: var(--text-medium);
    }
    .modal-footer a { color: var(--accent-purple); text-decoration: none; font-weight: 600; }

    /* Mobile Lens Tab */
    .mobile-lens-tab {
      display: none;
      position: fixed;
      top: 75%;
      left: 0;
      background: var(--accent-purple);
      color: white;
      width: 60px;
      height: 70px;
      border-radius: 0 12px 12px 0;
      text-decoration: none;
      font-weight: 600;
      z-index: 999;
      box-shadow: 2px 10px 24px rgba(123, 95, 196, 0.30);
      transition: all 0.3s ease;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 2px solid white;
      padding: 8px 0;
    }
    .mobile-lens-tab:hover {
      transform: translateX(3px);
      box-shadow: 3px 14px 30px rgba(123, 95, 196, 0.38);
      background: var(--accent-purple-dark);
    }
    html.dark-mode .mobile-lens-tab { border: 2px solid var(--primary-white); }
    .mobile-lens-tab-icon { font-size: 20px; margin-bottom: 4px; }
    .mobile-lens-tab-text { font-size: 10px; font-weight: 600; text-align: center; line-height: 1.1; }

    /* Mobile Lens Panel */
    .mobile-lens-panel {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: var(--primary-white);
      z-index: 1500;
      flex-direction: column;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      overflow: hidden;
    }
    .mobile-lens-panel.active { transform: translateX(0); }
    .mobile-lens-header {
      padding: 18px 16px;
      border-bottom: 1px solid var(--border-light);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: var(--primary-white);
    }
    .mobile-lens-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      gap: 10px;
      letter-spacing: -0.2px;
    }
    .mobile-lens-actions { display: flex; align-items: center; gap: 12px; }
    .mobile-lens-clear {
      background: none;
      border: 1px solid var(--accent-purple);
      color: var(--accent-purple);
      padding: 7px 14px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .mobile-lens-clear:hover { background: var(--accent-purple); color: white; }
    .close-mobile-lens {
      background: none;
      border: none;
      color: var(--text-medium);
      cursor: pointer;
      font-size: 20px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }
    .close-mobile-lens:hover { background-color: var(--light-gray); }
    .mobile-lens-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .mobile-lens-messages {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      background-color: var(--light-gray);
    }
    .mobile-lens-input-container {
      padding: 12px 14px;
      border-top: 1px solid var(--border-light);
      background-color: var(--primary-white);
      position: sticky;
      bottom: 0;
      left: 0;
      width: 100%;
      z-index: 10;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .mobile-lens-input {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--medium-gray);
      border-radius: 999px;
      outline: none;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s;
      background: var(--primary-white);
      color: var(--text-dark);
      flex: 1;
    }
    .mobile-lens-input:focus {
      border-color: var(--accent-purple);
      box-shadow: 0 0 0 2px rgba(123, 95, 196, 0.10);
    }
    .mobile-send {
      background-color: var(--accent-purple);
      color: white;
      border: none;
      border-radius: 999px;
      padding: 0 16px;
      height: 44px;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      box-shadow: 0 12px 26px rgba(123,95,196,0.22);
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    .mobile-send:hover { background-color: var(--accent-purple-dark); transform: translateY(-1px); box-shadow: 0 16px 34px rgba(123,95,196,0.28); }

    /* ===========================
       Interactive options (premium)
    =========================== */
    .interactive-options {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
      align-items: center;
    }
    .interactive-options.intake-options {
      gap: 6px;
      flex-wrap: nowrap;
      overflow: hidden;
    }

    .option-button {
      height: 32px;
      padding: 2px 10px 0; /* ✅ CHANGE 1: increase top padding */
      border-radius: 10px;
      border: 1px solid rgba(123, 95, 196, 0.35);
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.90));
      color: var(--text-dark);
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease, border-color 0.15s ease, opacity 0.15s ease;
      font-size: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      display: inline-flex;
      align-items: center;
      gap: 7px;
      user-select: none;
      white-space: nowrap;
      line-height: 1.3;
      flex: 0 0 auto;
    }
    html.dark-mode .option-button {
      background: linear-gradient(180deg, rgba(18,18,18,0.85), rgba(18,18,18,0.72));
      border-color: rgba(139, 108, 230, 0.38);
      box-shadow: 0 1px 4px rgba(0,0,0,0.30);
    }
    .option-button:hover {
      transform: translateY(-1px);
      border-color: rgba(123, 95, 196, 0.55);
      box-shadow: 0 10px 22px rgba(123,95,196,0.10);
      background: linear-gradient(180deg, rgba(240,235,250,0.85), rgba(255,255,255,0.92));
    }
    html.dark-mode .option-button:hover {
      box-shadow: 0 14px 28px rgba(0,0,0,0.35);
      background: linear-gradient(180deg, rgba(30,26,46,0.88), rgba(18,18,18,0.76));
    }
    .option-button:active { transform: translateY(0); }

    .option-button i { color: var(--accent-purple); }

    .option-button.selected {
      font-weight: 500;
      opacity: 0.96;
      border-color: rgba(16, 185, 129, 0.35);
      /* ✅ CHANGE 2: lighter green selected state */
      background: linear-gradient(180deg, rgba(16,185,129,0.16), rgba(255,255,255,0.92));
      box-shadow: 0 10px 26px rgba(16,185,129,0.10);
    }
    html.dark-mode .option-button.selected {
      background: linear-gradient(180deg, rgba(52,211,153,0.18), rgba(18,18,18,0.78));
      border-color: rgba(52,211,153,0.50);
      opacity: 0.98;
      box-shadow: 0 14px 28px rgba(0,0,0,0.35);
    }

    .option-button.urgent {
      border-color: rgba(239, 68, 68, 0.55);
      background: linear-gradient(180deg, var(--urgent-red-soft), rgba(255,255,255,0.92));
    }
    html.dark-mode .option-button.urgent {
      background: linear-gradient(180deg, rgba(248,113,113,0.16), rgba(18,18,18,0.78));
      border-color: rgba(248,113,113,0.55);
    }
    .option-button.urgent i { color: var(--urgent-red); }

    .option-button[disabled] {
      cursor: not-allowed;
      opacity: 0.55;
      transform: none !important;
      box-shadow: none !important;
    }

    /* Main Content */
    main {
      flex: 1;
      padding: 80px 30px 30px;
      display: flex;
      min-height: calc(100vh - 160px);
    }

    .content-wrapper {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    .lens-header {
      text-align: center;
      margin-bottom: 10px;
      padding-top: 160px;
    }

    .hero-title {
      font-size: 78px;
      font-weight: 700;
      margin-bottom: 17px;
      color: var(--text-dark);
      line-height: 1.05;
      max-width: 1050px;
      margin-left: auto;
      margin-right: auto;
      letter-spacing: -0.8px;
    }

    .hero-subtitle {
      font-size: 20px;
      color: var(--text-medium);
      max-width: 980px;
      margin: 0 auto 28px;
      font-weight: 500;
      margin-bottom: 50px;
    }

    .hero-cta {
      text-align: center;
      margin-top: 0px;
      margin-bottom: 120px;
    }

    .hero-cta-button {
      background: var(--accent-purple);
      color: white;
      padding: 14px 46px;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 16px 34px rgba(123, 95, 196, 0.26);
      display: inline-flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }
    .hero-cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 46px rgba(123, 95, 196, 0.32);
      background: var(--accent-purple-dark);
    }

    /* Explainer block */
    .lens-explainer {
      max-width: 1100px;
      margin: 0 auto 25px;
      background: var(--neutral-bg);
      border: 1px solid var(--border-light);
      border-radius: 18px;
      padding: 28px 28px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }
    .lens-explainer::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 4px;
      background: var(--premium-gradient);
    }
    .lens-explainer-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 18px;
      flex-wrap: wrap;
    }
    .lens-explainer h2 {
      font-size: 28px;
      font-weight: 700;
      color: var(--text-dark);
      line-height: 1.2;
      margin-bottom: 8px;
      letter-spacing: -0.4px;
    }
    .lens-explainer p {
      color: var(--text-medium);
      font-size: 16px;
      line-height: 1.55;
      margin-bottom: 14px;
      max-width: 1000px;
    }

    .lens-howto {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .mini-step {
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: 14px;
      padding: 10px 12px;
      display: inline-flex;
      gap: 10px;
      align-items: center;
      color: var(--text-medium);
      font-size: 13.6px;
      line-height: 1.35;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    }
    .mini-step b { color: var(--text-dark); font-weight: 600; }
    .mini-step .dot {
      width: 22px; height: 22px;
      border-radius: 50%;
      background: var(--lighter-purple);
      border: 1px solid var(--border-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--accent-purple);
      font-weight: 600;
      flex-shrink: 0;
    }

    .lens-explainer-grid {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 16px;
      margin-top: 14px;
    }
    .lens-explainer-card {
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: 16px;
      padding: 16px 16px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.05);
    }
    .lens-explainer-card h3 {
      font-size: 15px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .lens-explainer-card h3 i { color: var(--accent-purple); }
    .lens-explainer-bullets { list-style: none; display: flex; flex-direction: column; gap: 10px; }
    .lens-explainer-bullets li {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      color: var(--text-medium);
      font-size: 14px;
      line-height: 1.45;
    }
    .lens-explainer-bullets li i { color: var(--accent-purple); margin-top: 2px;}

    .full-width-section { width: 100%; margin-bottom: 35px; }

    /* How it works (3 cards) */
    .pill-sections {
      display: flex;
      gap: 20px;
      margin-bottom: 35px;
      margin-top: 10px;
    }
    .pill-section {
      background: var(--primary-white);
      border-radius: 18px;
      padding: 28px 24px;
      box-shadow: var(--premium-card-shadow);
      border: 1px solid var(--border-light);
      flex: 1;
      text-align: center;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      position: relative;
      overflow: hidden;
    }
    .pill-section::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 4px;
      background: var(--premium-gradient);
    }
    .pill-section:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.10);
    }
    .pill-icon {
      width: 66px;
      height: 66px;
      background: linear-gradient(180deg, var(--lighter-purple), rgba(255,255,255,0.92));
      color: var(--accent-purple);
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      font-size: 22px;
      border: 1px solid var(--border-light);
      box-shadow: 0 10px 22px rgba(123,95,196,0.10);
    }
    .pill-title {
      font-weight: 600;
      margin-bottom: 10px;
      font-size: 18px;
      color: var(--text-dark);
      letter-spacing: -0.2px;
    }
    .pill-description {
      font-size: 15px;
      color: var(--text-medium);
      line-height: 1.6;
    }

    .how-it-works-title {
      font-size: 34px;
      font-weight: 700;
      margin-bottom: 28px;
      color: var(--text-dark);
      text-align: center;
      letter-spacing: -0.4px;
    }

    .zoom-title {
      font-size: 34px;
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--text-dark);
      text-align: center;
      letter-spacing: -0.4px;
    }
    .zoom-subtitle {
      font-size: 16px;
      color: var(--text-medium);
      margin-bottom: 14px;
      text-align: center;
    }

    .privacy-note {
      text-align: center;
      font-size: 12px;
      color: var(--dark-gray);
      margin-bottom: 20px;
      font-style: italic;
      padding: 0 20px;
    }

    /* ===========================
       HOW IT WORKS (Real Examples)
    =========================== */
    .challenges-section { margin-bottom: 35px; }
    .challenges-shell {
      max-width: 1200px;
      margin: 0 auto;
      background: linear-gradient(135deg, rgba(123,95,196,0.06), rgba(255,255,255,0.92));
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 26px 26px;
      box-shadow: var(--premium-card-shadow);
      position: relative;
      overflow: hidden;
    }
    html.dark-mode .challenges-shell {
      background: linear-gradient(135deg, rgba(139,108,230,0.14), rgba(18,18,18,0.72));
    }
    .challenges-shell::before{
      content:'';
      position:absolute;
      top:0; left:0;
      width:100%; height:4px;
      background: var(--premium-gradient);
      opacity: 0.95;
    }
    .challenges-top {
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      flex-wrap:wrap;
      margin-bottom: 14px;
      position: relative;
      z-index: 2;
    }
    .challenges-title {
      font-size: 25px;
      font-weight: 600;
      color: var(--text-dark);
      letter-spacing: -0.4px;
      margin-top: 10px;
      margin-bottom: 6px;
      line-height: 1.15;
    }
    .challenges-intro {
      color: var(--text-medium);
      max-width: 760px;
      font-size: 15px;
      line-height: 1.55;
      margin-top: 6px;
    }

    .fomo-card {
      flex: 0 0 340px;
      max-width: 340px;
      background: rgba(255,255,255,0.80);
      border: 1px solid rgba(123,95,196,0.20);
      border-radius: 16px;
      padding: 14px 14px 56px;
      box-shadow: 0 8px 24px rgba(123,95,196,0.10);
      position: relative;
      overflow: hidden;
      min-height: 118px;
    }
    html.dark-mode .fomo-card {
      background: rgba(18,18,18,0.60);
      border-color: rgba(139,108,230,0.24);
      box-shadow: 0 14px 30px rgba(0,0,0,0.30);
    }
    .fomo-row { display:flex; align-items:flex-start; gap:12px; }
    .fomo-icon {
      width: 40px; height: 40px;
      border-radius: 14px;
      background: var(--premium-gradient);
      display:flex; align-items:center; justify-content:center;
      color:#fff;
      box-shadow: 0 12px 26px rgba(123,95,196,0.22);
      flex-shrink:0;
    }
    .fomo-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      color: var(--text-dark);
      margin-bottom: 4px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .fomo-title i { color: var(--accent-purple); }
    .fomo-text { font-size: 13px; color: var(--text-medium); line-height: 1.35; }

    .fomo-bottom {
      position: absolute;
      left: 12px;
      right: 12px;
      bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .fomo-views {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-medium);
      white-space: nowrap;
    }
    .fomo-views i { color: var(--accent-purple); opacity: 0.95; }

    .fomo-btn {
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: var(--accent-purple);
      color:#fff;
      font-weight: 600;
      font-size: 12px;
      text-decoration:none;
      box-shadow: 0 14px 28px rgba(123,95,196,0.22);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      white-space: nowrap;
      margin-left: auto;
    }
    .fomo-btn:hover { transform: translateY(-1px); background: var(--accent-purple-dark); box-shadow: 0 18px 36px rgba(123,95,196,0.28); }

    .challenges-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      position: relative;
      z-index: 2;
      margin-top: 14px;
    }
    .challenge-card {
      background: var(--primary-white);
      border-radius: 18px;
      padding: 18px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border-light);
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      min-height: 210px;
    }
    .challenge-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 3px;
      background: var(--premium-gradient);
      opacity: 0.8;
    }
    .challenge-card:hover { transform: translateY(-2px); box-shadow: 0 18px 42px rgba(0, 0, 0, 0.10); }

    .challenge-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }

    .challenge-category {
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      font-size: 10.5px;
      font-weight: 700;
      letter-spacing: 0.55px;
      text-transform: uppercase;
      border: 1px solid transparent;
      width: fit-content;
      line-height: 1.1;
    }
    .challenge-category i { font-size: 11px; }

    .challenge-category.burnout { color: var(--category-burnout); background: var(--pill-burnout-bg); border-color: var(--pill-burnout-border); }
    .challenge-category.hr { color: var(--category-hr); background: var(--pill-hr-bg); border-color: var(--pill-hr-border); }
    .challenge-category.politics { color: var(--category-politics); background: var(--pill-politics-bg); border-color: var(--pill-politics-border); }

    .challenge-text {
      font-weight: 600;
      margin-bottom: 10px;
      font-size: 14px;
      color: var(--text-dark);
      line-height: 1.45;
      letter-spacing: -0.1px;
    }
    .challenge-sub {
      font-size: 13px;
      color: var(--text-medium);
      line-height: 1.45;
      margin-bottom: 12px;
    }

    .recommended-tools {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .tool-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      text-decoration: none;
      border: 1px solid rgba(123,95,196,0.20);
      background: rgba(255,255,255,0.90);
      box-shadow: 0 6px 14px rgba(0,0,0,0.05);
      transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
      color: var(--text-dark);
    }
    html.dark-mode .tool-link {
      background: rgba(18,18,18,0.70);
      border-color: rgba(139,108,230,0.22);
      box-shadow: 0 10px 24px rgba(0,0,0,0.30);
    }
    .tool-link:hover {
      transform: translateY(-1px);
      border-color: rgba(123,95,196,0.40);
      box-shadow: 0 12px 24px rgba(123,95,196,0.10);
    }
    .tool-left {
      display:flex;
      align-items:flex-start;
      gap:10px;
      min-width: 0;
      flex: 1;
    }
    .tool-dot {
      width: 32px; height: 32px;
      border-radius: 12px;
      display:flex; align-items:center; justify-content:center;
      flex-shrink:0;
      box-shadow: 0 10px 22px rgba(0,0,0,0.08);
      border: 1px solid rgba(0,0,0,0.04);
    }
    html.dark-mode .tool-dot { border-color: rgba(255,255,255,0.06); }

    .tool-dot.burnout { background: rgba(245,158,11,0.14); color: var(--category-burnout); }
    .tool-dot.hr { background: rgba(109,40,217,0.14); color: var(--category-hr); }
    .tool-dot.politics { background: rgba(59,130,246,0.14); color: var(--category-politics); }

    .tool-name {
      font-size: 13px;
      font-weight: 500;
      letter-spacing: -0.1px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      white-space: normal;
      line-height: 1.25;
      max-width: 100%;
    }
    .tool-arrow {
      color: var(--text-medium);
      flex-shrink:0;
      font-size: 13px;
    }

    /* Chat container */
    .chat-container {
      background: var(--primary-white);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--premium-card-shadow);
      border: 1px solid var(--border-light);
      height: 550px; /* reduced ~15% */
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .chat-header {
      padding: 12px 18px;
      text-align: left;
      background: linear-gradient(135deg, rgba(230,224,245,0.70) 0%, rgba(255,255,255,0.92) 100%);
      border-bottom: 1px solid var(--border-light);
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
    }
    html.dark-mode .chat-header {
      background: linear-gradient(135deg, rgba(42,30,74,0.70) 0%, rgba(18,18,18,0.80) 100%);
    }

    .clear-session {
      position: absolute;
      right: 16px;
      background: none;
      border: 1px solid rgba(123,95,196,0.55);
      color: var(--accent-purple);
      padding: 6px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .clear-session:hover { background: var(--accent-purple); color: white; }

    .chat-title {
      font-size: 17px;
      font-weight: 600;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      gap: 10px;
      letter-spacing: -0.2px;
    }
    .chat-title-icon { color: var(--accent-purple); font-size: 16px; }

    .chat-content-wrapper {
      display: flex;
      height: 100%;
      flex: 1;
      min-height: 0;
      position: relative;
    }

    /* SIDEBAR */
    .most-popular-sidebar {
      width: 340px;
      background-color: var(--sidebar-bg);
      border-right: 1px solid var(--border-light);
      padding: 8px;
      overflow: hidden;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      overscroll-behavior: contain;
      position: relative;
      z-index: 1;
    }

    .popular-topics {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 30px;
      flex: 1;
      padding: 0;
      margin: 0;
      justify-content: flex-start;
    }

    /* ✅ CHANGE 5: add 20px space before Career Playbook pill */
    .popular-topics li:first-child { margin-top: 20px; }

    .popular-topics li {
      padding: 0;
      background: transparent;
      border: none;
      box-shadow: none;
      cursor: pointer;
      transition: transform 0.15s ease;
      user-select: none;
    }
    .popular-topics li:hover { transform: translateY(-1px); }
    .popular-topics li .tag { margin-top: 0; }

    .popular-topics li .tag .category-pill {
      cursor: pointer;
      width: 100%;
      justify-content: center;
      height: 36px;
      border-radius: 14px;
      padding: 0 12px;
      font-size: 10.9px;
      letter-spacing: 0.55px;
      text-align: center;
      white-space: nowrap;
      box-shadow: 0 8px 18px rgba(0,0,0,0.06);
      border-width: 1px;
      transform: none;
    }
    html.dark-mode .popular-topics li .tag .category-pill {
      box-shadow: 0 12px 26px rgba(0,0,0,0.30);
    }

    .popular-topics li.active .category-pill {
      transform: translateY(-1px);
      box-shadow: 0 16px 34px rgba(123,95,196,0.12);
      border-color: rgba(123,95,196,0.40);
    }
    html.dark-mode .popular-topics li.active .category-pill {
      box-shadow: 0 18px 38px rgba(0,0,0,0.38);
      border-color: rgba(139,108,230,0.50);
    }

    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      position: relative;
      min-height: 0;
    }

    .chat-messages {
      flex: 1;
      padding: 18px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
      background-color: var(--light-gray);
      min-height: 0;
      -webkit-overflow-scrolling: touch;
    }

    .message {
      max-width: 92%;
      padding: 16px 18px;
      border-radius: 18px;
      position: relative;
      animation: fadeIn 0.35s ease;
      line-height: 1.65;
      font-size: 14px;
      font-weight: 400;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .message-content p { font-weight: 400; }

    .intro-lines .intro-line {
      font-size: 15px;
      font-weight: 500;
      line-height: 1.65;
    }
    .intro-lines .intro-line.subtle {
      font-size: 14px;
      font-weight: 400;
      opacity: 0.95;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .user-message {
      align-self: flex-end;
      background-color: var(--user-msg-bg);
      color: white;
      border-bottom-right-radius: 6px;
      box-shadow: 0 10px 24px rgba(123, 95, 196, 0.14);
      flex-direction: row-reverse;
    }

    .bot-message {
      align-self: flex-start;
      background-color: var(--bot-msg-bg);
      color: var(--text-dark);
      border-bottom-left-radius: 6px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.05);
      border: 1px solid rgba(0,0,0,0.02);
    }
    html.dark-mode .bot-message { border-color: rgba(255,255,255,0.06); }

    .bot-avatar {
      width: 32px;
      height: 32px;
      border-radius: 14px;
      background: var(--premium-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: 500;
      flex-shrink: 0;
      box-shadow: 0 12px 26px rgba(123,95,196,0.20);
      align-self: flex-start;
      margin-top: 2px;
    }

    .message-content { flex: 1; }

    .question-line {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 14px;
      margin-bottom: 6px;
    }
    .q-progress {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-medium);
      white-space: nowrap;
      opacity: 0.9;
    }

    .detected-wrap {
      margin: 10px 0 0;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    .detected-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      color: var(--text-medium);
    }

    /* ✅ CHANGE 4: sentence between “tools suggested” and related category */
    .recommendation-note{
      margin-top: 2px;
      margin-bottom: 8px;
      font-size: 13px;
      color: var(--text-medium);
      line-height: 1.45;
      font-weight: 500;
    }

    .typing-indicator {
      display: inline-block;
      padding: 12px 16px;
      background-color: var(--bot-msg-bg);
      border-radius: 18px;
      border-bottom-left-radius: 5px;
    }
    .typing-dots { display: flex; align-items: flex-start; }
    .typing-dots span {
      height: 6px;
      width: 6px;
      background-color: var(--dark-gray);
      border-radius: 50%;
      display: block;
      margin: 14px 3px;
      animation: typing 1.4s infinite ease-in-out;
      align-self: center;
    }
    .typing-dots span:nth-child(1) { animation-delay: 0s; }
    .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
    .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
    @keyframes typing {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-2px); }
    }

    .chat-input-container {
      display: flex;
      padding: 14px 16px;
      border-top: 1px solid var(--border-light);
      background-color: var(--primary-white);
      position: sticky;
      bottom: 0;
      z-index: 10;
      flex-shrink: 0;
      gap: 10px;
    }

    .chat-input {
      flex: 1;
      padding: 12px 14px;
      border: 1px solid var(--medium-gray);
      border-radius: 999px;
      outline: none;
      font-size: 15px;
      font-weight: 500;
      transition: all 0.3s;
      background: var(--primary-white);
      color: var(--text-dark);
    }
    .chat-input:focus { border-color: var(--accent-purple); box-shadow: 0 0 0 2px rgba(123, 95, 196, 0.10); }

    .send-button {
      background-color: var(--accent-purple);
      color: white;
      border: none;
      border-radius: 999px;
      padding: 0 18px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      box-shadow: 0 12px 26px rgba(123,95,196,0.22);
    }
    .send-button:hover { background-color: var(--accent-purple-dark); transform: translateY(-1px); box-shadow: 0 16px 34px rgba(123,95,196,0.28); }

    /* Resources */
    .resources-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 14px;
    }

    .resource-card {
      background-color: var(--primary-white);
      border-left: 4px solid var(--accent-purple);
      padding: 15px;
      border-radius: 14px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.06);
      animation: slideIn 0.45s ease;
      display: flex;
      flex-direction: column;
      height: 100%;
      border: 1px solid var(--border-light);
      min-width: 0;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .resource-card h3 {
      color: var(--text-dark);
      margin-bottom: 6px;
      font-size: 15px;
      font-weight: 500;
      display: flex;
      gap: 8px;
      align-items: flex-start;
      letter-spacing: -0.2px;
      line-height: 1.25;
      min-width: 0;
    }
    .resource-card h3 span.title {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .resource-card .category {
      color: var(--text-medium);
      font-size: 11px;
      font-weight: 600;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.6px;
    }

    .resource-card .description {
      font-size: 13px;
      margin-bottom: 12px;
      color: var(--text-medium);
      flex-grow: 1;
      line-height: 1.45;
      font-weight: 400; /* ✅ CHANGE 3: reduce weight (all three boxes) */
    }

    .resource-card a { text-decoration: none; display: block; }

    .resource-card button {
      width: 100%;
      background-color: var(--accent-purple);
      color: white;
      border: none;
      padding: 9px 14px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
      font-size: 12px;
      margin-top: auto;
      box-shadow: 0 12px 26px rgba(123,95,196,0.18);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .resource-card button:hover { background-color: var(--accent-purple-dark); transform: translateY(-1px); box-shadow: 0 16px 34px rgba(123,95,196,0.24); }
    .resource-card button i { font-size: 12px; opacity: 0.95; }

    .resources-guidance {
      margin-top: 12px;
      font-size: 12.5px;
      color: var(--text-medium);
      line-height: 1.45;
      opacity: 0.95;
    }
    .resources-guidance b { color: var(--text-dark); font-weight: 600; }

    /* Popular issues slide-in panel (covers sidebar) */
    .popular-issues {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 340px;
      background: var(--primary-white);
      padding: 14px;
      z-index: 20;
      transform: translateX(-105%);
      transition: transform 0.35s ease;
      overflow-y: auto;
      box-shadow: 18px 0 40px rgba(0,0,0,0.10);
      border-right: 1px solid var(--border-light);
    }
    .popular-issues.active { transform: translateX(0); }

    .issues-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.10);
      z-index: 15;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
    }
    html.dark-mode .issues-overlay { background: rgba(0,0,0,0.35); }
    .issues-overlay.active { opacity: 1; pointer-events: auto; }

    .issues-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-light);
    }
    .issues-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-dark);
      letter-spacing: 0.4px;
      text-transform: uppercase;
    }
    .close-issues {
      background: none;
      border: none;
      color: var(--text-medium);
      cursor: pointer;
      font-size: 16px;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s ease;
    }
    .close-issues:hover { background: rgba(0,0,0,0.06); }

    .issue-pills { display: flex; flex-direction: column; gap: 10px; }

    .issue-pill {
      background: var(--primary-white);
      border: 1px solid rgba(123, 95, 196, 0.35);
      color: var(--text-dark);
      padding: 10px 12px;
      border-radius: 14px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease, background 0.15s ease;
      font-size: 13px;
      font-weight: 500;
      text-align: left;
      box-shadow: 0 8px 18px rgba(0,0,0,0.06);
      line-height: 1.3;
      user-select: none;
      display: flex;
      gap: 10px;
      align-items: flex-start;
    }
    html.dark-mode .issue-pill { border-color: rgba(139, 108, 230, 0.38); box-shadow: 0 12px 26px rgba(0,0,0,0.30); }
    .issue-pill i { color: var(--accent-purple); margin-top: 2px; }
    .issue-pill:hover { transform: translateY(-1px); background: rgba(230,224,245,0.45); border-color: rgba(123,95,196,0.55); box-shadow: 0 14px 30px rgba(123,95,196,0.12); }

    /* Micro CTA */
    .micro-cta {
      text-align: center;
      padding: 30px;
      margin: 40px 0;
      background: var(--neutral-bg);
      border-radius: 16px;
      border: 1px solid var(--border-light);
    }
    .micro-cta p {
      font-size: 28px;
      color: var(--text-dark);
      margin-bottom: 22px;
      font-weight: 700;
      letter-spacing: -0.3px;
    }
    .cta-small {
      background: var(--accent-purple);
      color: white;
      padding: 12px 24px;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.2s ease;
      display: inline-block;
      margin: 0 10px;
      box-shadow: 0 14px 28px rgba(123, 95, 196, 0.22);
    }
    .cta-small:hover { transform: translateY(-1px); box-shadow: 0 18px 36px rgba(123, 95, 196, 0.28); background: var(--accent-purple-dark); }
    .cta-link { color: var(--accent-purple); text-decoration: none; font-weight: 700; font-size: 16px; margin: 0 10px; transition: color 0.2s ease; }
    .cta-link:hover { color: var(--accent-purple-dark); }

    /* Footer */
    footer {
      background-color: var(--primary-white);
      padding: 40px 0 20px;
      color: var(--text-medium);
      border-top: 1px solid var(--border-light);
    }
    .footer-content {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 80px;
      margin-bottom: 40px;
      align-items: start;
    }
    .footer-about { max-width: 400px; padding-left: 20px; }
    .footer-logo { display: flex; align-items: center; margin-bottom: 10px; }
    .footer-logo-img {
      height: 100px;
      width: auto;
      padding: 8px 0;
      transition: all 0.3s ease;
      display: block;
      min-height: 100px;
    }
    .footer-description { margin-bottom: 10px; line-height: 1.6; }
    .footer-heading {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--text-dark);
      letter-spacing: -0.2px;
    }
    .footer-links { list-style: none; }
    .footer-link { margin-bottom: 10px; }
    .footer-link a {
      color: var(--text-medium);
      text-decoration: none;
      transition: color 0.2s ease;
      font-weight: 600;
    }
    .footer-link a:hover { color: var(--accent-purple); }
    .footer-bottom {
      text-align: center;
      padding-top: 30px;
      border-top: 1px solid var(--border-light);
      font-size: 14px;
    }
    .footer-nav { background-color: transparent; padding: 0; border-radius: 0; box-shadow: none; margin: 0; }
    .footer-nav-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }

    .footer-newsletter { margin-top: 0; padding-top: 0; border-top: none; text-align: center; }
    .footer-newsletter-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--text-dark);
      letter-spacing: -0.2px;
    }
    .footer-newsletter-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 300px;
      margin: 0 auto;
    }
    .footer-newsletter-input {
      padding: 12px 16px;
      border: 1px solid var(--medium-gray);
      border-radius: 12px;
      font-size: 14px;
      background: var(--primary-white);
      color: var(--text-dark);
    }
    .footer-newsletter-button {
      background: var(--accent-purple);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s ease;
      box-shadow: 0 14px 28px rgba(123,95,196,0.18);
    }
    .footer-newsletter-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 36px rgba(123, 95, 196, 0.24);
      background: var(--accent-purple-dark);
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .pill-sections { flex-direction: column; }
      .challenges-grid { grid-template-columns: repeat(2, 1fr); }
      .resources-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .lens-explainer-grid { grid-template-columns: 1fr; }
    }

    @media (max-width: 992px) {
      .nav-links { gap: 30px; }
      .footer-content { grid-template-columns: 1fr 1fr; }
      .most-popular-sidebar { width: 300px; }
      .popular-issues { width: 300px; }
      .fomo-card { flex: 1; max-width: 100%; }
    }

    @media (max-width: 768px) {
      .mobile-create-account-tab { display: flex; }
      .mobile-lens-tab { display: flex; top: 75%; }

      .nav-container { justify-content: center; position: relative; }
      .logo {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        height: 100%;
      }
      .logo-img { height: 125px; transform: none; padding: 12px 0; display: flex; align-items: center; }
      .mobile-toggle { display: flex; position: absolute; left: 20px; align-items: center; }
      .nav-actions { transform: none; gap: 16px; position: absolute; right: 20px; align-items: center; }
      .nav-actions .sign-in { display: none; }
      .nav-actions .header-cta { display: none; }

      .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: var(--nav-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        flex-direction: column;
        padding: 20px;
        border-top: 1px solid var(--border-light);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
        gap: 20px;
      }
      .nav-links.active { display: flex; }

      .nav-link.active { color: var(--accent-purple); }
      .nav-link.active::after { display: none; }

      .nav-link-container { display: flex; align-items: center; justify-content: flex-start; width: 100%; }
      .new-tag { position: static; margin-left: 8px; top: auto; right: auto; }

      .mobile-sign-in {
        display: block !important;
        margin-top: 10px;
        padding: 12px 20px;
        background: white;
        color: var(--accent-purple);
        border-radius: 12px;
        text-align: center;
        font-weight: 700;
        text-decoration: none;
        border: 2px solid var(--accent-purple);
      }

      .mobile-create-account {
        display: block !important;
        margin-top: 10px;
        padding: 12px 20px;
        background: var(--accent-purple);
        color: white;
        border-radius: 12px;
        text-align: center;
        font-weight: 700;
        text-decoration: none;
        border: 2px solid var(--accent-purple);
        box-shadow: 0 10px 22px rgba(123, 95, 196, 0.18);
      }

      .zoom-in-section.desktop-only { display: none; }
      .hero-cta { display: none; }

      main { padding: 80px 15px 30px; }
      .lens-header { padding-top: 100px; margin-bottom: 16px; }
      .hero-title { font-size: 42px; line-height: 1.15; margin-bottom: 14px; }
      .hero-subtitle { font-size: 18px; line-height: 1.5; margin-bottom: 20px; }

      .lens-explainer { padding: 20px; }
      .lens-explainer h2 { font-size: 22px; }
      .lens-explainer p { font-size: 15px; }

      .how-it-works-title, .zoom-title { font-size: 30px; margin-bottom: 24px; }

      .pill-sections { gap: 18px; margin-top: 14px; }
      .pill-section { padding: 22px 18px; }
      .pill-icon { width: 56px; height: 56px; font-size: 20px; margin-bottom: 14px; }
      .pill-title { font-size: 18px; margin-bottom: 10px; }
      .pill-description { font-size: 15px; }

      .challenges-shell { padding: 18px; }
      .challenges-grid { grid-template-columns: 1fr; gap: 14px; }

      .chat-container { display: none; }

      .micro-cta { padding: 26px 18px; margin: 34px 0; }
      .micro-cta p { font-size: 20px; margin-bottom: 18px; }
      .cta-small, .cta-link {
        display: block;
        margin: 10px auto;
        max-width: 240px;
        font-size: 15px;
        padding: 12px 24px;
      }

      .footer-content { grid-template-columns: 1fr; gap: 40px; }
      .footer-nav-grid { grid-template-columns: 1fr; gap: 30px; order: 1; }
      .footer-logo-img { height: 120px; }

      .content-wrapper { gap: 34px; }
      section { padding: 60px 0; }
    }

    @media (max-width: 480px) {
      .logo-img { height: 100px; }
      .footer-logo-img { height: 100px; }
      .hero-title { font-size: 36px; }
      .hero-subtitle { font-size: 16px; }
      .how-it-works-title, .zoom-title { font-size: 28px; }
      .category-pill { height: 30px; }
      .option-button { font-size: 11.5px; padding: 2px 9px 0; height: 32px; }
      .resources-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <!-- Mobile: Create Account Tab -->
  <a href="#" class="mobile-create-account-tab" id="createAccountTab" aria-label="Create account">
    <i class="fas fa-user-plus" aria-hidden="true"></i>
  </a>

  <!-- Mobile: Lens Tab -->
  <a href="#" class="mobile-lens-tab" id="mobileLensTab" aria-label="Open The Lens">
    <div class="mobile-lens-tab-icon"><i class="fas fa-magnifying-glass" aria-hidden="true"></i></div>
    <div class="mobile-lens-tab-text">The Lens</div>
  </a>

  <!-- Create Account Modal -->
  <div class="create-account-modal" id="createAccountModal" role="dialog" aria-modal="true" aria-label="Create account">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Create Account</h2>
        <button class="close-modal" id="closeModal" type="button" aria-label="Close">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>

      <form class="modal-form" onsubmit="event.preventDefault(); alert('Account creation is not enabled on this demo page yet.');">
        <div class="form-group">
          <label class="form-label" for="name">Full Name</label>
          <input type="text" id="name" class="form-input" placeholder="Enter your full name" required>
        </div>

        <div class="form-group">
          <label class="form-label" for="email">Email</label>
          <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
        </div>

        <div class="form-group">
          <label class="form-label" for="password">Password</label>
          <input type="password" id="password" class="form-input" placeholder="Create a password" required>
        </div>

        <button type="submit" class="submit-btn">Create Account</button>
      </form>

      <div class="modal-footer">
        <p>Already have an account? <a href="sign-in.html">Sign In</a></p>
      </div>
    </div>
  </div>

  <!-- Mobile Lens Panel -->
  <div class="mobile-lens-panel" id="mobileLensPanel">
    <div class="mobile-lens-header">
      <h2 class="mobile-lens-title"><i class="fas fa-magnifying-glass" aria-hidden="true"></i> The Lens</h2>
      <div class="mobile-lens-actions">
        <button class="mobile-lens-clear" id="mobileClearSession" type="button">Clear</button>
        <button class="close-mobile-lens" id="closeMobileLens" type="button" aria-label="Close The Lens">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
    </div>
    <div class="mobile-lens-content">
      <div class="mobile-lens-messages" id="mobileLensMessages">
        <div class="message bot-message">
          <div class="bot-avatar">TL</div>
          <div class="message-content intro-lines">
            <p class="intro-line">In about 90 seconds, we’ll take this from chaos to clarity. What’s been happening at work?</p>
            <p class="intro-line subtle">No judgement. Just say it how it feels.</p>
          </div>
        </div>
      </div>
      <div class="mobile-lens-input-container">
        <input type="text" class="mobile-lens-input" id="mobileLensInput" placeholder="Describe your workplace challenge...">
        <button class="mobile-send" id="mobileSend" type="button">Send</button>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <nav>
    <div class="container nav-container">
      <button class="mobile-toggle" type="button" aria-label="Open menu"><i class="fas fa-bars" aria-hidden="true"></i></button>

      <a href="index.html" class="logo" aria-label="Home">
        <img src="assets/img/logo.png" alt="The Employee Playbook" class="logo-img" id="logo">
      </a>

      <div class="nav-links" aria-label="Primary navigation">
        <a href="the-lens.html" class="nav-link active">The Lens</a>
        <a href="the-toolkit.html" class="nav-link">The Toolkit</a>
        <div class="nav-link-container">
          <a href="the-coach.html" class="nav-link">The Coach</a>
          <span class="new-tag">NEW</span>
        </div>
        <a href="the-shift.html" class="nav-link">The Shift</a>
        <a href="the-pricing.html" class="nav-link">The Pricing</a>
        <a href="sign-in.html" class="mobile-sign-in">Sign In</a>
        <a href="create-account.html" class="mobile-create-account">Create Account</a>
      </div>

      <div class="nav-actions">
        <a href="create-account.html" class="header-cta">Sign up</a>
        <a href="sign-in.html" class="sign-in">Sign in</a>
        <button class="theme-toggle" type="button" aria-label="Toggle theme"><i class="fas fa-moon" aria-hidden="true"></i></button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main>
    <div class="container">
      <div class="content-wrapper">

        <!-- Hero -->
        <div class="lens-header">
          <h1 class="hero-title">When the moment feels noisy, clarity is power.</h1>
          <p class="hero-subtitle">
            Clarity isn’t about more information. It’s about knowing what matters right now.
            <br>The Lens turns messy reality into a calm, strategic next move.
          </p>

          <div class="hero-cta">
            <a href="#lensChat" class="hero-cta-button"><i class="fas fa-magnifying-glass" aria-hidden="true"></i> Try The Lens Now</a>
          </div>
        </div>

        <!-- Explainer -->
        <div class="lens-explainer" id="what-is-the-lens">
          <div class="lens-explainer-top">
            <div style="flex: 2; min-width: 260px;">
              <h2>Situations at work can make you feel powerless, even when you’re capable.</h2>
              <p>
                When the pressure is high, your brain goes into survival mode: you second-guess, you overthink, you react,
                and you keep trying to “figure it out” with half the information. That’s not a character flaw — it’s a workplace trap.
              </p>
              <p>
                <strong>The Lens is how you stop leaking credibility in chaos:</strong> it turns what you’re experiencing into signal,
                names the pattern, highlights the risk, and routes you to the right tools — fast.
              </p>
              <p>
                Most people don’t need “more confidence”. They need clarity, leverage, and a safe plan. The Lens gives you that in minutes.
                <br><br>
              </p>

              <div class="lens-howto" aria-label="How to use The Lens">
                <div class="mini-step"><span class="dot">1</span> <span><b>Describe</b> what is happening at work</span></div>
                <div class="mini-step"><span class="dot">2</span> <span><b>Get</b> insight and understand what is really going on</span></div>
                <div class="mini-step"><span class="dot">3</span> <span><b>Use</b> the scripts, templates and frameworks</span></div>
              </div>
            </div>
          </div>

          <div class="lens-explainer-grid">
            <div class="lens-explainer-card">
              <h3><i class="fas fa-bullseye" aria-hidden="true"></i> What The Lens does</h3>
              <ul class="lens-explainer-bullets">
                <li><i class="fas fa-check" aria-hidden="true"></i> Zoom in & Focus. Understand what is really going on.</li>
                <li><i class="fas fa-check" aria-hidden="true"></i> Gives words + structure: what to say, what to document, what to avoid.</li>
                <li><i class="fas fa-check" aria-hidden="true"></i> Directs you to the best-fit tools in The Toolkit so you can get clarity quickly.</li>
              </ul>
            </div>

            <div class="lens-explainer-card">
              <h3><i class="fas fa-compass" aria-hidden="true"></i> Where it sends you next</h3>
              <ul class="lens-explainer-bullets">
                <li><i class="fas fa-wrench" aria-hidden="true"></i> <strong>The Toolkit:</strong> scripts, templates, checklists, plans.</li>
                <li><i class="fas fa-user-shield" aria-hidden="true"></i> <strong>The Coach:</strong> for complex or high-stakes moments.</li>
                <li><i class="fas fa-arrows-rotate" aria-hidden="true"></i> <strong>The Shift:</strong> rebuild habits, identity, consistency.</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- How it works -->
        <div class="full-width-section" style="margin-top: 10px;">
          <h2 class="how-it-works-title">How The Lens Works</h2>
          <div class="pill-sections">
            <div class="pill-section">
              <div class="pill-icon"><i class="fas fa-magnifying-glass" aria-hidden="true"></i></div>
              <div class="pill-title">Name what’s happening</div>
              <div class="pill-description">
                Turn confusion into signal. The Lens helps you see the pattern underneath the chaos, so you stop blaming yourself for “not knowing”.
              </div>
            </div>
            <div class="pill-section">
              <div class="pill-icon"><i class="fas fa-chess-knight" aria-hidden="true"></i></div>
              <div class="pill-title">See the risk + leverage</div>
              <div class="pill-description">
                Understand what matters most: where you’re exposed, what to document, what not to do, and what would change the game fastest.
              </div>
            </div>
            <div class="pill-section">
              <div class="pill-icon"><i class="fas fa-crosshairs" aria-hidden="true"></i></div>
              <div class="pill-title">Get the next best move</div>
              <div class="pill-description">
                You’ll be routed to the most relevant scripts, templates, and frameworks so you can act with confidence and control, not emotion.
              </div>
            </div>
          </div>
        </div>

        <!-- Real-World Challenges -->
        <div class="full-width-section challenges-section" id="realWorldChallenges">
          <h2 class="how-it-works-title" style="margin-bottom: 18px;">Real Life Challenges and Support</h2>

          <div class="challenges-shell">
            <div class="challenges-top">
              <div style="flex: 2; min-width: 280px;">
                <h2 class="challenges-title">Real Employee Experiences and How The Employee Playbook Became Their Trusted Support.</h2>
                <p class="challenges-intro">
                </p>
              </div>
            </div>

            <div class="challenges-grid">
              <div class="challenge-card">
                <div class="challenge-head">
                  <div class="challenge-category burnout">
                    <i class="fas fa-battery-half" aria-hidden="true"></i> Expectations, Burnout &amp; Capacity
                  </div>
                </div>
                <div class="challenge-text">Sarah said "The workload keeps rising, and I’m stuck in “always on”. I’m close to burning out."</div>
                <div class="challenge-sub"><br>The Employee Playbook said: You need a controlled reset. what drops first, how to set expectations, and what to document.<br></div>

                <div class="recommended-tools" aria-label="Recommended tools">
                  <a class="tool-link" href="the-toolkit.html#capacity">
                    <div class="tool-left">
                      <div class="tool-dot burnout"><i class="fas fa-chart-pie" aria-hidden="true"></i></div>
                      <div class="tool-name">Capacity Assessment Tool</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>

                  <a class="tool-link" href="the-toolkit.html#workload-script">
                    <div class="tool-left">
                      <div class="tool-dot burnout"><i class="fas fa-scroll" aria-hidden="true"></i></div>
                      <div class="tool-name">Workload Reset Script</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>

                  <a class="tool-link" href="the-toolkit.html#burnout">
                    <div class="tool-left">
                      <div class="tool-dot burnout"><i class="fas fa-shield-halved" aria-hidden="true"></i></div>
                      <div class="tool-name">Burnout Recovery Plan</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>
                </div>
              </div>

              <div class="challenge-card">
                <div class="challenge-head">
                  <div class="challenge-category hr">
                    <i class="fas fa-file-contract" aria-hidden="true"></i> HR &amp; Formal Processes
                  </div>
                </div>
                <div class="challenge-text">Jude told The Lens "I think I’m being managed out. The tone has changed, and “process” is being mentioned."</div>
                <div class="challenge-sub">The Employee Playbook said: You need clean documentation, tight wording, and a plan that reduces exposure without escalating.</div>

                <div class="recommended-tools" aria-label="Recommended tools">
                  <a class="tool-link" href="the-toolkit.html#documentation">
                    <div class="tool-left">
                      <div class="tool-dot hr"><i class="fas fa-file-lines" aria-hidden="true"></i></div>
                      <div class="tool-name">Documentation Form</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>

                  <a class="tool-link" href="the-toolkit.html#performance">
                    <div class="tool-left">
                      <div class="tool-dot hr"><i class="fas fa-gavel" aria-hidden="true"></i></div>
                      <div class="tool-name">Performance Process Guide</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>

                  <a class="tool-link" href="the-toolkit.html#meeting-notes">
                    <div class="tool-left">
                      <div class="tool-dot hr"><i class="fas fa-pen-to-square" aria-hidden="true"></i></div>
                      <div class="tool-name">Meeting Notes + Follow-Up Script</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>
                </div>
              </div>

              <div class="challenge-card">
                <div class="challenge-head">
                  <div class="challenge-category politics">
                    <i class="fas fa-users" aria-hidden="true"></i> Workplace Dynamics &amp; Politics
                  </div>
                </div>
                <div class="challenge-text">Vikram said "Return-to-office pressure is creeping in. It feels like a power move, not a policy."</div>
                <div class="challenge-sub">The Employee Playbook said: You need a stakeholder view, a calm narrative, and a plan that protects your position.</div>

                <div class="recommended-tools" aria-label="Recommended tools">
                  <a class="tool-link" href="the-toolkit.html#politics">
                    <div class="tool-left">
                      <div class="tool-dot politics"><i class="fas fa-diagram-project" aria-hidden="true"></i></div>
                      <div class="tool-name">Workplace Politics Map</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>

                  <a class="tool-link" href="the-toolkit.html#stakeholders">
                    <div class="tool-left">
                      <div class="tool-dot politics"><i class="fas fa-users" aria-hidden="true"></i></div>
                      <div class="tool-name">Stakeholder Mapping Grid</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>

                  <a class="tool-link" href="the-toolkit.html#team-tension">
                    <div class="tool-left">
                      <div class="tool-dot politics"><i class="fas fa-fire" aria-hidden="true"></i></div>
                      <div class="tool-name">Team Tension Heatmap</div>
                    </div>
                    <div class="tool-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
                  </a>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- Desktop-only Lens Chat -->
        <div class="full-width-section zoom-in-section desktop-only">
          <h2 class="zoom-title">Activate The Lens</h2>
          <p class="zoom-subtitle">Describe your challenge and get routed to the right tools</p>

          <p class="privacy-note">
            This tool does not store personal identifiers or information
          </p>

          <div class="chat-container" id="lensChat">
            <div class="chat-header">
              <h3 class="chat-title"><i class="fas fa-magnifying-glass chat-title-icon" aria-hidden="true"></i> The Lens</h3>
              <button class="clear-session" id="clearSession" type="button">Clear Session</button>
            </div>

            <div class="chat-content-wrapper">
              <div class="issues-overlay" id="issuesOverlay" aria-hidden="true"></div>

              <div class="popular-issues" id="popularIssues" aria-label="Common issues panel">
                <div class="issues-header">
                  <h4 class="issues-title" id="issuesTitle">Common issues</h4>
                  <button class="close-issues" id="closeIssues" type="button" aria-label="Close prompts panel">
                    <i class="fas fa-times" aria-hidden="true"></i>
                  </button>
                </div>
                <div class="issue-pills" id="issuePills"></div>
              </div>

              <div class="most-popular-sidebar">
                <ul class="popular-topics" id="popularTopics">
                  <li data-category="career">
                    <div class="tag">
                      <span class="category-pill career" data-tooltip="“I feel stuck — I need a decision.”"><i class="fas fa-briefcase category-icon" aria-hidden="true"></i> Career Playbook</span>
                    </div>
                  </li>
                  <li data-category="clarity">
                    <div class="tag">
                      <span class="category-pill clarity" data-tooltip="“Priorities keep changing.”"><i class="fas fa-bullseye category-icon" aria-hidden="true"></i> Clarity, Priorities &amp; Direction</span>
                    </div>
                  </li>
                  <li data-category="confidence">
                    <div class="tag">
                      <span class="category-pill confidence" data-tooltip="“I’m losing confidence.”"><i class="fas fa-chart-line category-icon" aria-hidden="true"></i> Confidence, Presence &amp; Influence</span>
                    </div>
                  </li>
                  <li data-category="burnout">
                    <div class="tag">
                      <span class="category-pill burnout" data-tooltip="“I’m at capacity.”"><i class="fas fa-battery-half category-icon" aria-hidden="true"></i> Expectations, Burnout &amp; Capacity</span>
                    </div>
                  </li>
                  <li data-category="hr">
                    <div class="tag">
                      <span class="category-pill hr" data-tooltip="“I’m worried about HR or performance.”"><i class="fas fa-file-contract category-icon" aria-hidden="true"></i> HR &amp; Formal Process</span>
                    </div>
                  </li>
                  <li data-category="manager">
                    <div class="tag">
                      <span class="category-pill manager" data-tooltip="“My manager is the problem.”"><i class="fas fa-people-arrows category-icon" aria-hidden="true"></i> Manager Relationship &amp; Leadership Style</span>
                    </div>
                  </li>
                  <li data-category="politics">
                    <div class="tag">
                      <span class="category-pill politics" data-tooltip="“Something feels political.”"><i class="fas fa-users category-icon" aria-hidden="true"></i> Workplace Dynamics &amp; Politics</span>
                    </div>
                  </li>
                </ul>
              </div>

              <div class="chat-area">
                <div class="chat-messages" id="chatMessages">
                  <div class="message bot-message">
                    <div class="bot-avatar">TL</div>
                    <div class="message-content intro-lines">
                      <p class="intro-line">In 90 seconds, let's get some clarity. What’s been happening at work?</p>
                      <p class="intro-line subtle">No judgement. Just say it how it feels.</p>
                    </div>
                  </div>
                </div>

                <div class="chat-input-container">
                  <input type="text" class="chat-input" id="userInput" placeholder="Describe your workplace challenge...">
                  <button class="send-button" id="sendButton" type="button">Send</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Micro CTA -->
        <div class="micro-cta">
          <p>Ready to turn clarity into strategy?</p>
          <a href="the-pricing.html" class="cta-small">Start with The Core plan (£9/mo)</a>
          <a href="the-pricing.html" class="cta-link">See full pricing</a>
        </div>

      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-about">
          <div class="footer-logo">
            <a href="index.html" aria-label="Home">
              <img src="assets/img/logo.png" alt="The Employee Playbook" class="footer-logo-img" id="footer-logo">
            </a>
          </div>
          <p class="footer-description">A private strategy system giving employees clarity and advantage in the moments that matter most.</p>
        </div>

        <div class="footer-newsletter">
          <h3 class="footer-newsletter-title">Stay updated with strategic insights</h3>
          <form class="footer-newsletter-form" onsubmit="event.preventDefault(); alert('Subscribed (demo).');">
            <input type="email" class="footer-newsletter-input" placeholder="Your email" required>
            <button type="submit" class="footer-newsletter-button">Subscribe</button>
          </form>
        </div>

        <div class="footer-nav">
          <div class="footer-nav-grid">
            <div class="footer-nav-section">
              <h3 class="footer-heading">The Playbook</h3>
              <ul class="footer-links">
                <li class="footer-link"><a href="the-lens.html">The Lens</a></li>
                <li class="footer-link"><a href="the-toolkit.html">The Toolkit</a></li>
                <li class="footer-link"><a href="the-coach.html">The Coach</a></li>
                <li class="footer-link"><a href="the-shift.html">The Shift</a></li>
                <li class="footer-link"><a href="the-pricing.html">The Pricing</a></li>
              </ul>
            </div>

            <div class="footer-nav-section">
              <h3 class="footer-heading">The Company</h3>
              <ul class="footer-links">
                <li class="footer-link"><a href="profile.html">Profile</a></li>
                <li class="footer-link"><a href="about-us.html">About</a></li>
                <li class="footer-link"><a href="privacy.html">Privacy</a></li>
                <li class="footer-link"><a href="terms-and-conditions.html">Terms</a></li>
                <li class="footer-link"><a href="help-centre.html">Help Centre</a></li>
              </ul>
            </div>

          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>© 2025 The Employee Playbook. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      document.body.classList.add('loaded');

      // Theme
      const themeToggle = document.querySelector('.theme-toggle');
      const themeIcon = themeToggle.querySelector('i');

      function applyThemeFromDOM() {
        const isDark = document.documentElement.classList.contains('dark-mode');
        themeIcon.classList.toggle('fa-moon', !isDark);
        themeIcon.classList.toggle('fa-sun', isDark);

        const logo = document.getElementById('logo');
        const footerLogo = document.getElementById('footer-logo');
        if (logo && footerLogo) {
          if (isDark) {
            logo.src = 'assets/img/logo-dark.png';
            footerLogo.src = 'assets/img/logo-dark.png';
          } else {
            logo.src = 'assets/img/logo.png';
            footerLogo.src = 'assets/img/logo.png';
          }
        }
      }
      applyThemeFromDOM();

      themeToggle.addEventListener('click', function () {
        document.documentElement.classList.toggle('dark-mode');
        const isDark = document.documentElement.classList.contains('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        applyThemeFromDOM();
      });

      // Mobile nav toggle
      const mobileToggle = document.querySelector('.mobile-toggle');
      const navLinks = document.querySelector('.nav-links');
      mobileToggle.addEventListener('click', function () {
        navLinks.classList.toggle('active');
        const icon = this.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
      });

      // Create Account modal
      const createAccountModal = document.getElementById('createAccountModal');
      const closeModal = document.getElementById('closeModal');
      const createAccountTab = document.getElementById('createAccountTab');

      if (createAccountTab) {
        createAccountTab.addEventListener('click', function(e) {
          e.preventDefault();
          createAccountModal.classList.add('active');
        });
      }
      if (closeModal) {
        closeModal.addEventListener('click', function() {
          createAccountModal.classList.remove('active');
        });
      }
      if (createAccountModal) {
        createAccountModal.addEventListener('click', function(e) {
          if (e.target === createAccountModal) createAccountModal.classList.remove('active');
        });
      }

      // Mobile Lens Panel
      const mobileLensTab = document.getElementById('mobileLensTab');
      const mobileLensPanel = document.getElementById('mobileLensPanel');
      const closeMobileLens = document.getElementById('closeMobileLens');
      const mobileLensMessages = document.getElementById('mobileLensMessages');
      const mobileLensInput = document.getElementById('mobileLensInput');
      const mobileClearSession = document.getElementById('mobileClearSession');
      const mobileSend = document.getElementById('mobileSend');

      if (mobileLensTab) {
        mobileLensTab.addEventListener('click', function(e) {
          e.preventDefault();
          mobileLensPanel.style.display = 'flex';
          setTimeout(() => mobileLensPanel.classList.add('active'), 10);
          setTimeout(() => mobileLensInput && mobileLensInput.focus(), 50);
        });
      }
      if (closeMobileLens) {
        closeMobileLens.addEventListener('click', function() {
          mobileLensPanel.classList.remove('active');
          setTimeout(() => mobileLensPanel.style.display = 'none', 300);
        });
      }

      // ===========================
      // Lens Engine
      // ===========================
      class TheLens {
        constructor() {
          this.categories = {
            clarity: {
              key: "clarity",
              name: "Clarity, Priorities & Direction",
              pillClass: "clarity",
              icon: "bullseye",
              prompts: [
                "Priorities keep changing and I can’t plan.",
                "The scope is unclear and I’m being pulled in all directions.",
                "I’m getting conflicting instructions from different people.",
                "Decisions are slow and I’m blocked by dependencies.",
                "Success isn’t defined and I’m guessing what ‘good’ looks like."
              ],
              keywords: ["unclear","clarity","priorities","priority","direction","scope","ambiguous","ambiguity","what do they want","changing priorities","moving goalposts","no strategy","no plan","conflicting","alignment","uncertainty"]
            },
            burnout: {
              key: "burnout",
              name: "Expectations, Burnout & Capacity",
              pillClass: "burnout",
              icon: "battery-half",
              prompts: [
                "My workload is beyond capacity and I’m exhausted.",
                "Everything is urgent and I can’t get ahead.",
                "I’m ‘always on’ and I can’t switch off.",
                "The expectations are unrealistic and it’s affecting my health.",
                "I need a reset conversation about workload and boundaries."
              ],
              keywords: ["workload","burnout","capacity","exhausted","overwhelmed","too much","can't keep up","stretched thin","bandwidth","tired","fatigue","overloaded","pressure","stress","always on","no breaks"]
            },
            manager: {
              key: "manager",
              name: "Manager Relationship & Leadership Style",
              pillClass: "manager",
              icon: "people-arrows",
              prompts: [
                "My manager micromanages and I have no autonomy.",
                "I feel unsupported and it’s affecting my work.",
                "My manager’s behaviour is unpredictable or aggressive.",
                "Feedback feels unfair / constant criticism.",
                "Communication is breaking down and I don’t know how to reset it."
              ],
              keywords: ["manager","boss","leadership","micromanage","micromanaged","control","controlling","trust","autonomy","checking","approval","monitored","hovering","unsupported","favourites","favorites","style mismatch","aggressive manager","inconsistent"]
            },
            politics: {
              key: "politics",
              name: "Workplace Dynamics & Politics",
              pillClass: "politics",
              icon: "users",
              prompts: [
                "I feel sidelined or excluded from key decisions.",
                "Someone is taking credit / undermining my work.",
                "There’s tension, gossip, or cliques affecting the team.",
                "Stakeholders are misaligned and I’m caught in the middle.",
                "It feels like blame is being positioned and I need to protect myself."
              ],
              keywords: ["politics","political","clique","cliques","sidelined","excluded","left out","team tension","conflict","tension","gossip","rumours","rumor","power","influence","stakeholders","undermining","backchannel","alignment issues","silos","blame"]
            },
            hr: {
              key: "hr",
              name: "HR & Formal Processes",
              pillClass: "hr",
              icon: "file-contract",
              prompts: [
                "I’m worried a formal process is starting (HR / performance).",
                "There are performance concerns and I need structure.",
                "I need to document incidents properly (calm, factual, dated).",
                "I’ve got a meeting coming up and I need to prepare.",
                "This may involve bullying/harassment and I need to be careful."
              ],
              keywords: ["hr","formal","process","grievance","disciplinary","investigation","complaint","performance","pip","warning","probation","policy","document","documentation","evidence","email trail","record","meeting notes","tribunal","acas"]
            },
            confidence: {
              key: "confidence",
              name: "Confidence, Presence & Influence",
              pillClass: "confidence",
              icon: "chart-line",
              prompts: [
                "I’m losing confidence and second-guessing myself.",
                "Speaking up feels risky and I freeze in the moment.",
                "I need stronger presence in meetings (without being aggressive).",
                "I need help wording a difficult conversation.",
                "I’m being overlooked and I need to increase visibility/recognition."
              ],
              keywords: ["confidence","second guess","second-guess","imposter","imposter syndrome","nervous","speak up","presence","influence","visibility","credit","recognition","overlooked","ideas stolen","reputation","how to say","difficult conversation","feedback"]
            },
            career: {
              key: "career",
              name: "Career Playbook",
              pillClass: "career",
              icon: "briefcase",
              prompts: [
                "I feel stuck and I’m not progressing.",
                "I want a promotion but I don’t know how to position it.",
                "I’m considering a move and need a plan.",
                "I need to build credibility in a new role / new environment.",
                "I’m thinking about exit options and protecting reputation."
              ],
              keywords: ["promotion","progression","career","stuck","growth","title","level","raise","salary","positioning","next role","internal move","opportunity","development","career plan","cv","interview","exit","resign","decision","trade-off","stay or go"]
            }
          };

          this.toolsByCategory = {
            clarity: [
              { name: "Workload Clarity Checklist", type: "Checklist", icon: "bullseye", href: "the-toolkit.html#clarity" },
              { name: "Priority Reset Plan", type: "Plan", icon: "list-check", href: "the-toolkit.html#priorities" },
              { name: "Decision Record Template", type: "Template", icon: "file-signature", href: "the-toolkit.html#decision-record" }
            ],
            burnout: [
              { name: "Capacity Assessment Tool", type: "Assessment", icon: "chart-pie", href: "the-toolkit.html#capacity" },
              { name: "Burnout Recovery Plan", type: "Plan", icon: "shield-halved", href: "the-toolkit.html#burnout" },
              { name: "Workload Reset Script", type: "Script", icon: "scroll", href: "the-toolkit.html#workload-script" }
            ],
            manager: [
              { name: "Micromanagement Framework", type: "Playbook", icon: "compass", href: "the-toolkit.html#micromanagement" },
              { name: "Boundary + Autonomy Script", type: "Script", icon: "comments", href: "the-toolkit.html#autonomy" },
              { name: "Manager Pattern Identifier Checklist", type: "Assessment", icon: "user-shield", href: "the-toolkit.html#manager-patterns" }
            ],
            politics: [
              { name: "Workplace Politics Map", type: "Framework", icon: "diagram-project", href: "the-toolkit.html#politics" },
              { name: "Stakeholder Mapping Grid", type: "Template", icon: "users", href: "the-toolkit.html#stakeholders" },
              { name: "Team Tension Heatmap", type: "Assessment", icon: "fire", href: "the-toolkit.html#team-tension" }
            ],
            hr: [
              { name: "Documentation Form", type: "Template", icon: "file-lines", href: "the-toolkit.html#documentation" },
              { name: "Performance Process Guide", type: "Guide", icon: "gavel", href: "the-toolkit.html#performance" },
              { name: "Meeting Notes + Follow-Up Script", type: "Script", icon: "pen-to-square", href: "the-toolkit.html#meeting-notes" }
            ],
            confidence: [
              { name: "Presence Upgrade Checklist", type: "Checklist", icon: "sparkles", href: "the-toolkit.html#presence" },
              { name: "Difficult Conversation Planner", type: "Template", icon: "comments", href: "the-toolkit.html#difficult-convo" },
              { name: "Credit + Recognition Tracker", type: "Template", icon: "award", href: "the-toolkit.html#credit" }
            ],
            career: [
              { name: "Career Positioning Framework", type: "Framework", icon: "arrow-trend-up", href: "the-toolkit.html#career" },
              { name: "Promotion Case Builder", type: "Template", icon: "file-signature", href: "the-toolkit.html#promotion" },
              { name: "Exit & Reputation Plan", type: "Plan", icon: "route", href: "the-toolkit.html#exit" }
            ]
          };

          this.followUps = [
            { q: "Right now, how concerning does the situation feel?", options: [
              { label: "Low", icon: "circle" },
              { label: "Medium", icon: "minus" },
              { label: "High", icon: "triangle-exclamation", urgent: true }
            ]},
            { q: "If this goes wrong, what’s the real cost to you?", options: [
              { label: "Reputation", icon: "user-tie" },
              { label: "Performance", icon: "file-circle-exclamation" },
              { label: "Health / capacity", icon: "heart-pulse" },
              { label: "Politics", icon: "users" }
            ]},
            { q: "What’s the strongest signal you’ve noticed so far?", options: [
              { label: "Nothing formal", icon: "leaf" },
              { label: "Tone shift", icon: "eye" },
              { label: "Meeting booked", icon: "calendar-check" },
              { label: "Written process", icon: "file-contract" }
            ]},
            { q: "What would help you feel more in control first?", options: [
              { label: "Script", icon: "comment-dots" },
              { label: "Documentation", icon: "file-lines" },
              { label: "Plan", icon: "route" },
              { label: "Decision clarity", icon: "bullseye" }
            ]},
            { q: "Do you have a trusted person inside work you can confide in?", options: [
              { label: "Yes", icon: "check" },
              { label: "Not sure", icon: "circle-question" },
              { label: "No", icon: "xmark" }
            ]},
            { q: "What timeline are you working with?", options: [
              { label: "This week", icon: "clock" },
              { label: "This month", icon: "calendar" },
              { label: "Longer", icon: "hourglass" }
            ]},
            { q: "What is your preferred outcome?", options: [
              { label: "Stabilise role", icon: "shield" },
              { label: "Reduce workload", icon: "battery-half" },
              { label: "Reset dynamics", icon: "people-arrows" },
              { label: "Plan exit", icon: "person-walking" }
            ]},
            { q: "What action would help you feel more in control now?", options: [
              { label: "Email follow-up", icon: "envelope" },
              { label: "1:1 conversation", icon: "comments" },
              { label: "Meeting with HR", icon: "gavel" },
              { label: "Not sure yet", icon: "compass" }
            ]}
          ];
        }

        analyze(message) {
          const text = (message || "").toLowerCase().trim();
          const scores = {};

          Object.values(this.categories).forEach(cat => {
            let score = 0;
            cat.keywords.forEach(k => {
              if (text.includes(k.toLowerCase())) score += 1;
            });

            if (cat.key === "hr") {
              ["pip","grievance","disciplinary","investigation","harassment","bullying"].forEach(w => {
                if (text.includes(w)) score += 2;
              });
            }
            if (cat.key === "burnout") {
              ["burnout","exhausted","overwhelmed","can't keep up","no capacity"].forEach(w => {
                if (text.includes(w)) score += 2;
              });
            }
            if (cat.key === "manager") {
              ["micromanage","controlling","unpredictable","aggressive","unsupported"].forEach(w => {
                if (text.includes(w)) score += 2;
              });
            }
            if (cat.key === "politics") {
              ["sidelined","excluded","clique","gossip","undermining","backchannel"].forEach(w => {
                if (text.includes(w)) score += 2;
              });
            }

            if (score > 0) scores[cat.key] = { ...cat, score };
          });

          if (!Object.keys(scores).length) {
            scores.clarity = { ...this.categories.clarity, score: 1 };
          }
          return scores;
        }

        getTop(scores, count = 1) {
          return Object.values(scores).sort((a,b) => b.score - a.score).slice(0, count);
        }

        pillHTML(cat) {
          return `<span class="category-pill ${cat.pillClass}">
              <i class="fas fa-${cat.icon} category-icon" aria-hidden="true"></i>
              ${cat.name}
            </span>`;
        }

        toolsFor(catKey) {
          return this.toolsByCategory[catKey] || this.toolsByCategory.clarity;
        }

        toolsHTML(tools, cat) {
          let html = `
            <div class="recommendation-note">Based on what you’ve shared, here’s what I’d recommend next.</div>
            <div class="detected-wrap" aria-label="Related category">
              <span class="detected-label">RELATED CATEGORY</span>
              ${this.pillHTML(cat)}
            </div>
            <div class="resources-grid">
          `;
          tools.forEach(tool => {
            html += `
              <div class="resource-card">
                <div class="category">${tool.type}</div>
                <h3><i class="fas fa-${tool.icon}" aria-hidden="true"></i> <span class="title">${tool.name}</span></h3>
                <p class="description">Designed to support <strong>${cat.name}</strong> moments without overthinking.</p>
                <a href="${tool.href}">
                  <button type="button"><i class="fas fa-arrow-up-right-from-square" aria-hidden="true"></i> Open</button>
                </a>
              </div>
            `;
          });
          html += `</div>
            <div class="resources-guidance">
              <b>Guidance, not advice:</b> this route is based on what you’ve shared and is meant to help you think clearly and choose your next step.
              Use the tools for structure and wording. If you feel exposed, emotionally flooded, or the situation is escalating, get real-world support.
              This is not legal advice.
            </div>
          `;
          return html;
        }

        followUpHTML(stepIdx) {
          const total = this.followUps.length;
          const step = this.followUps[stepIdx];
          const options = step.options.map((o) => {
            const urgentClass = o.urgent ? "urgent" : "";
            return `<button class="option-button ${urgentClass}" type="button" data-opt="${encodeURIComponent(o.label)}">
              <i class="fas fa-${o.icon}" aria-hidden="true"></i> ${o.label}
            </button>`;
          }).join("");
          return `
            <div class="question-line">
              <div><strong>${step.q}</strong></div>
              <span class="q-progress">${stepIdx + 1}/${total}</span>
            </div>
            <div class="interactive-options intake-options" role="group" aria-label="Answer options">
              ${options}
            </div>
          `;
        }
      }

      const theLens = new TheLens();

      // Helpers
      function escapeHTML(str) {
        return (str || "").replace(/[&<>"']/g, function(m) {
          return ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[m];
        });
      }

      function empatheticLead(text) {
        const t = (text || "").toLowerCase();
        if (t.includes("pip") || t.includes("hr") || t.includes("performance")) return "That “process” feeling can scramble your thinking. We’ll slow it down and get you a clean plan.";
        if (t.includes("burnout") || t.includes("exhaust") || t.includes("overwhelm")) return "If you’re at capacity, everything starts to feel louder than it is. Let’s turn this into something structured and controllable.";
        if (t.includes("politic") || t.includes("sidelin") || t.includes("excluded")) return "When it feels political, the biggest risks are usually the unseen dynamics. Let’s map the pattern and choose leverage.";
        return "Got it. Let’s find out more. Select the closest option";
      }

      // ====== Mobile helpers ======
      function addMobileUserMessage(text) {
        const div = document.createElement('div');
        div.className = 'message user-message';
        div.innerHTML = `<div class="message-content">${escapeHTML(text)}</div>`;
        mobileLensMessages.appendChild(div);
        mobileLensMessages.scrollTop = mobileLensMessages.scrollHeight;
      }

      function addMobileTyping() {
        const typing = document.createElement('div');
        typing.className = 'message bot-message typing-indicator';
        typing.innerHTML = `
          <div class="bot-avatar">TL</div>
          <div class="message-content">
            <div class="typing-dots"><span></span><span></span><span></span></div>
          </div>
        `;
        mobileLensMessages.appendChild(typing);
        mobileLensMessages.scrollTop = mobileLensMessages.scrollHeight;
        return typing;
      }

      function addMobileBotMessage(html) {
        const div = document.createElement('div');
        div.className = 'message bot-message';
        div.innerHTML = `
          <div class="bot-avatar">TL</div>
          <div class="message-content">${html}</div>
        `;
        mobileLensMessages.appendChild(div);
        mobileLensMessages.scrollTop = mobileLensMessages.scrollHeight;
        return div;
      }

      // Mobile send
      function handleMobileSend() {
        const text = (mobileLensInput.value || "").trim();
        if (!text) return;
        addMobileUserMessage(text);
        mobileLensInput.value = '';

        const typing = addMobileTyping();
        setTimeout(() => {
          typing.remove();
          const scores = theLens.analyze(text);
          const top = theLens.getTop(scores, 1)[0];
          addMobileBotMessage(`
            <p style="margin:0 0 8px;">${escapeHTML(empatheticLead(text))}</p>
            <p style="margin:0;">You’re likely in <strong>${escapeHTML(top.name)}</strong>. Jump into the desktop Lens for the full routing and tools.</p>
          `);
        }, 650);
      }

      if (mobileSend) mobileSend.addEventListener('click', handleMobileSend);
      if (mobileLensInput) {
        mobileLensInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') handleMobileSend();
        });
      }
      if (mobileClearSession) {
        mobileClearSession.addEventListener('click', () => {
          mobileLensMessages.innerHTML = `
            <div class="message bot-message">
              <div class="bot-avatar">TL</div>
              <div class="message-content intro-lines">
                <p class="intro-line">In about 90 seconds, we’ll take this from chaos to clarity. What’s been happening at work?</p>
                <p class="intro-line subtle">No judgement. Just say it how it feels.</p>
              </div>
            </div>
          `;
        });
      }

      // ====== Desktop helpers ======
      const chatMessages = document.getElementById('chatMessages');
      const userInput = document.getElementById('userInput');
      const sendButton = document.getElementById('sendButton');
      const clearSession = document.getElementById('clearSession');

      const popularIssues = document.getElementById('popularIssues');
      const closeIssues = document.getElementById('closeIssues');
      const issuePills = document.getElementById('issuePills');
      const issuesTitle = document.getElementById('issuesTitle');
      const popularTopics = document.getElementById('popularTopics');
      const issuesOverlay = document.getElementById('issuesOverlay');

      let state = {
        currentCategoryKey: null,
        currentCategoryObj: null,
        followUpIdx: 0,
        answers: [],
        hasStarted: false
      };

      function addUserMessage(text) {
        const div = document.createElement('div');
        div.className = 'message user-message';
        div.innerHTML = `<div class="message-content">${escapeHTML(text)}</div>`;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function addBotMessage(html) {
        const div = document.createElement('div');
        div.className = 'message bot-message';
        div.innerHTML = `
          <div class="bot-avatar">TL</div>
          <div class="message-content">${html}</div>
        `;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        return div;
      }

      function addTypingIndicator() {
        const typing = document.createElement('div');
        typing.className = 'message bot-message typing-indicator';
        typing.innerHTML = `
          <div class="bot-avatar">TL</div>
          <div class="message-content">
            <div class="typing-dots"><span></span><span></span><span></span></div>
          </div>
        `;
        chatMessages.appendChild(typing);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        return typing;
      }

      function resetChat() {
        state = { currentCategoryKey: null, currentCategoryObj: null, followUpIdx: 0, answers: [], hasStarted: false };
        chatMessages.innerHTML = `
          <div class="message bot-message">
            <div class="bot-avatar">TL</div>
            <div class="message-content intro-lines">
              <p class="intro-line">In 90 seconds, let's get some clarity. What’s been happening at work?</p>
              <p class="intro-line subtle">No judgement. Just say it how it feels.</p>
            </div>
          </div>
        `;
        [...popularTopics.querySelectorAll('li')].forEach(li => li.classList.remove('active'));
        closeIssuesPanel();
      }

      function closeIssuesPanel() {
        popularIssues.classList.remove('active');
        issuesOverlay.classList.remove('active');
      }

      function openIssuesPanel(catKey) {
        const cat = theLens.categories[catKey];
        if (!cat) return;

        issuesTitle.textContent = `${cat.name} prompts`;
        issuePills.innerHTML = '';
        cat.prompts.forEach(p => {
          const btn = document.createElement('button');
          btn.className = 'issue-pill';
          btn.type = 'button';
          btn.innerHTML = `<i class="fas fa-circle-chevron-right" aria-hidden="true"></i><span>${escapeHTML(p)}</span>`;
          btn.addEventListener('click', () => {
            closeIssuesPanel();
            userInput.value = p;
            handleSend();
          });
          issuePills.appendChild(btn);
        });

        popularIssues.classList.add('active');
        issuesOverlay.classList.add('active');
      }

      function highlightSidebar(catKey) {
        [...popularTopics.querySelectorAll('li')].forEach(li => {
          li.classList.toggle('active', li.getAttribute('data-category') === catKey);
        });
      }

      function renderFollowUp(stepIdx) {
        const html = theLens.followUpHTML(stepIdx);
        const bot = addBotMessage(html);

        const buttons = bot.querySelectorAll('.option-button');
        buttons.forEach(btn => {
          btn.addEventListener('click', () => {
            // select styling (single selection)
            buttons.forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');

            const val = decodeURIComponent(btn.getAttribute('data-opt') || "");
            state.answers.push(val);

            // move forward
            setTimeout(() => {
              state.followUpIdx += 1;
              if (state.followUpIdx < theLens.followUps.length) {
                renderFollowUp(state.followUpIdx);
              } else {
                // show tools
                const tools = theLens.toolsFor(state.currentCategoryKey);
                addBotMessage(theLens.toolsHTML(tools, state.currentCategoryObj));
              }
            }, 260);
          });
        });
      }

      function startLensFlow(userText) {
        const scores = theLens.analyze(userText);
        const top = theLens.getTop(scores, 1)[0];

        state.currentCategoryKey = top.key;
        state.currentCategoryObj = top;
        state.followUpIdx = 0;
        state.answers = [];
        state.hasStarted = true;

        highlightSidebar(top.key);

        addBotMessage(`<p style="margin:0;">${escapeHTML(empatheticLead(userText))}</p>`);
        renderFollowUp(0);
      }

      function handleSend() {
        const text = (userInput.value || "").trim();
        if (!text) return;

        addUserMessage(text);
        userInput.value = '';

        const typing = addTypingIndicator();
        setTimeout(() => {
          typing.remove();

          // if already started, treat as additional context and re-route
          startLensFlow(text);
        }, 520);
      }

      // Sidebar category click
      if (popularTopics) {
        popularTopics.addEventListener('click', (e) => {
          const li = e.target.closest('li[data-category]');
          if (!li) return;
          const catKey = li.getAttribute('data-category');
          highlightSidebar(catKey);
          openIssuesPanel(catKey);
        });
      }

      if (closeIssues) closeIssues.addEventListener('click', closeIssuesPanel);
      if (issuesOverlay) issuesOverlay.addEventListener('click', closeIssuesPanel);

      if (sendButton) sendButton.addEventListener('click', handleSend);
      if (userInput) {
        userInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') handleSend();
        });
      }

      if (clearSession) clearSession.addEventListener('click', resetChat);
    });
  </script>
</body>
</html>

