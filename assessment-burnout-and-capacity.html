<!DOCTYPE html>
<html lang="en-GB" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Burnout Warning Assessment | The Employee Playbook</title>

  <!-- FAVICON -->
  <link rel="icon" type="image/x-icon" href="assets/img/favicon.png">
  <link rel="icon" type="image/png" href="assets/img/favicon.png">
  <link rel="apple-touch-icon" href="assets/img/favicon.png">
  <link rel="shortcut icon" href="assets/img/favicon.png">
  <meta name="theme-color" content="#7B5FC4">

  <!-- THEME PRELOAD (prevents flash + keeps toggle consistent) -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('theme'); // "dark" | "light" | null
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const useDark = saved ? saved === 'dark' : prefersDark;
        if (useDark) document.documentElement.classList.add('dark-mode');
      } catch (e) {}
    })();
  </script>

  <!-- ICONS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* ===========================
       ROOT VARIABLES (Brand + Category Pill System)
       Tool styling stays BRAND (purple). Burnout accents use category colours.
    =========================== */
    :root{
      /* Brand */
      --primary-white:#FFFFFF;
      --light-gray:#F8F9FA;
      --medium-gray:#E9ECEF;
      --dark-gray:#6C757D;

      --text-dark:#212529;
      --text-medium:#495057;

      --accent-purple:#7B5FC4;
      --accent-purple-dark:#5A4496;
      --light-purple:#E6E0F5;
      --lighter-purple:#F0EBFA;

      --border-light: rgba(0,0,0,0.08);

      --nav-bg: rgba(255,255,255,0.95);
      --hero-bg: linear-gradient(135deg, #F9F6FF 0%, #F0EBFA 100%);
      --premium-gradient: linear-gradient(135deg, #7B5FC4 0%, #5A4496 100%);

      /* Utility */
      --success-green:#10b981;
      --warning-orange:#f59e0b;
      --danger-red:#ef4444;

      /* Category colours (canonical) */
      --category-clarity: #7B5FC4;
      --category-burnout: #f59e0b;
      --category-manager: #10b981;
      --category-politics: #3b82f6;
      --category-hr: #6D28D9;
      --category-confidence: #ef4444;
      --category-career: #800020;

      /* Pill tokens (light) */
      --pill-burnout-bg: linear-gradient(135deg, rgba(245, 158, 11, 0.08), rgba(245, 158, 11, 0.04));
      --pill-burnout-border: rgba(245, 158, 11, 0.2);
      --pill-burnout-hover-bg: linear-gradient(135deg, rgba(245, 158, 11, 0.12), rgba(245, 158, 11, 0.08));
      --pill-burnout-hover-border: rgba(245, 158, 11, 0.3);
    }

    /* Dark Mode Variables */
    .dark-mode{
      --primary-white:#1a1a1a;
      --light-gray:#2a2a2a;
      --medium-gray:#3a3a3a;
      --dark-gray:#888888;

      --text-dark:#e0e0e0;
      --text-medium:#b0b0b0;

      --accent-purple:#9d86e9;
      --accent-purple-dark:#7b5fc4;
      --light-purple: rgba(123, 95, 196, 0.2);
      --lighter-purple: rgba(123, 95, 196, 0.1);

      --border-light: rgba(255,255,255,0.08);
      --nav-bg: rgba(30,30,30,0.95);
      --hero-bg: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
      --premium-gradient: linear-gradient(135deg, #9d86e9 0%, #7b5fc4 100%);

      /* category (dark variants) */
      --category-burnout: #fbbf24;

      /* pill tokens (dark) */
      --pill-burnout-bg: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.08));
      --pill-burnout-border: rgba(251, 191, 36, 0.3);
      --pill-burnout-hover-bg: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.12));
      --pill-burnout-hover-border: rgba(251, 191, 36, 0.4);
    }

    /* ===========================
       GLOBAL
    =========================== */
    *{ margin:0; padding:0; box-sizing:border-box; font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    body{
      background: var(--primary-white);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
      opacity: 0;
      transition: opacity 0.4s ease, background-color 0.3s ease, color 0.3s ease;
      min-height: 100vh;
    }
    body.loaded{ opacity: 1; }
    .container{ max-width:1400px; margin:0 auto; padding:0 20px; }

    /* ===========================
       NAVIGATION (Matches template)
    =========================== */
    nav{
      position: fixed;
      top:0;
      width:100%;
      background: var(--nav-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 1000;
      border-bottom: 1px solid var(--border-light);
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      height: 80px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .nav-container{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding: 12px 0;
      height:100%;
    }
    .logo-img{
      height:100px;
      width:auto;
      transform: translateX(20%);
      padding: 14px 10px;
      transition: all 0.3s ease;
      display:block;
      min-height:100px;
    }
    .nav-links{ display:flex; gap:50px; }
    .nav-link{
      color: var(--text-dark);
      text-decoration:none;
      font-weight:500;
      transition: color 0.3s ease;
      font-size:17px;
    }
    .nav-link:hover{ color: var(--accent-purple); }
    .nav-link-container{ position:relative; display:inline-block; }
    .new-tag{
      position:absolute; top:-12px; right:-35px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color:#000;
      font-size:10px;
      font-weight:700;
      padding:2px 6px;
      border-radius:4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      z-index:10;
      white-space:nowrap;
    }
    .dark-mode .new-tag{ box-shadow: 0 2px 4px rgba(0,0,0,0.4); }

    .nav-actions{
      display:flex;
      align-items:center;
      gap:24px;
      transform: translateX(-20%);
    }
    .header-cta{
      background: var(--accent-purple);
      color:#fff;
      padding: 8px 20px;
      border-radius: 50px;
      text-decoration:none;
      font-weight:600;
      font-size:14px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(123,95,196,0.3);
    }
    .header-cta:hover{
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(123,95,196,0.35);
    }
    .sign-in{
      color: var(--text-dark);
      text-decoration:none;
      font-weight:500;
      font-size:17px;
    }
    .sign-in:hover{ color: var(--accent-purple); }

    .theme-toggle, .mobile-toggle{
      background:none; border:none; color: var(--text-dark);
      cursor:pointer;
      width:36px; height:36px;
      border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      transition: background-color 0.3s ease;
    }
    .theme-toggle:hover, .mobile-toggle:hover{ background: var(--light-gray); }
    .mobile-toggle{ display:none; font-size:24px; width:40px; height:40px; }

    .mobile-sign-in, .mobile-sign-up{ display:none; }

    @media (max-width:768px){
      .nav-container{ justify-content:center; position:relative; }
      .logo{
        position:absolute; left:50%; transform: translateX(-50%);
        display:flex; align-items:center; height:100%;
      }
      .logo-img{ height:125px; transform:none; padding:12px 0; }
      .mobile-toggle{ display:flex; position:absolute; left:20px; }
      .nav-actions{
        transform:none; gap:16px;
        position:absolute; right:20px;
      }
      .nav-actions .sign-in, .nav-actions .header-cta{ display:none; }

      .nav-links{
        display:none;
        position:absolute; top:100%; left:0; width:100%;
        background: var(--nav-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        flex-direction:column;
        padding:20px;
        border-top: 1px solid var(--border-light);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        gap:20px;
      }
      .nav-links.active{ display:flex; }
      .nav-link-container{ display:flex; align-items:center; width:100%; }
      .new-tag{ position:static; margin-left:8px; }

      .mobile-sign-in{
        display:block !important;
        margin-top:10px;
        padding:12px 20px;
        background: var(--primary-white);
        color: var(--accent-purple);
        border-radius:8px;
        text-align:center;
        font-weight:700;
        text-decoration:none;
        border: 2px solid var(--accent-purple);
      }
      .mobile-sign-up{
        display:block !important;
        margin-top:10px;
        padding:12px 20px;
        background: var(--accent-purple);
        color:#fff;
        border-radius:8px;
        text-align:center;
        font-weight:700;
        text-decoration:none;
        border: 2px solid var(--accent-purple);
      }
    }

    /* ===========================
       HERO (Template style)
    =========================== */
    .tool-hero-section{
      width:100%;
      background: var(--hero-bg);
      padding: 20px 0 30px;
      margin-top: 110px;
      position:relative;
      border-bottom: 1px solid var(--border-light);
      overflow:hidden;
    }
    .tool-hero-section::before{
      content:'';
      position:absolute; inset:0;
      background: linear-gradient(135deg, rgba(250, 245, 255, 0.85) 0%, rgba(245, 240, 255, 0.6) 50%, rgba(255, 255, 255, 0.25) 100%);
      z-index:1;
    }
    .dark-mode .tool-hero-section::before{
      background: linear-gradient(135deg, rgba(42, 42, 42, 0.9) 0%, rgba(31, 31, 31, 0.7) 50%, rgba(26, 26, 26, 0.4) 100%);
    }
    .tool-hero-content{
      position:relative; z-index:2;
      max-width:1100px;
      margin:0 auto;
      padding: 0 20px 10px;
      animation: heroFadeUp 0.45s ease-out;
    }
    @keyframes heroFadeUp { from{opacity:0; transform: translateY(18px);} to{opacity:1; transform: translateY(0);} }

    .checklist-name{
      font-size: 20px;
      font-weight: 600;
      color: var(--accent-purple);
      text-transform: uppercase;
      letter-spacing: 1.8px;
      margin-bottom: 14px;
      margin-top: 32px;
      display:block;
    }
    .hero-main-heading{
      font-size: 46px;
      font-weight: 600;
      color: var(--text-dark);
      line-height: 1.1;
      margin-bottom: 18px;
      max-width: 1100px;
    }
    .hero-subheading{
      font-size: 16px;
      color: var(--text-medium);
      line-height: 1.6;
      max-width: 1000px;
      margin-bottom: 18px;
    }

    .hero-note{
      display:flex;
      gap:10px;
      align-items:flex-start;
      background: rgba(255,255,255,0.86);
      border: 1px solid var(--pill-burnout-border);
      border-radius: 12px;
      padding: 14px 16px;
      box-shadow: 0 8px 26px rgba(0,0,0,0.06);
      max-width: 1000px;
    }
    .dark-mode .hero-note{ background: rgba(20,20,20,0.6); box-shadow: 0 8px 26px rgba(0,0,0,0.35); }
    .hero-note i{ color: var(--category-burnout); margin-top: 3px; }
    .hero-note strong{ color: var(--text-dark); }
    .hero-note span{ color: var(--text-medium); font-size: 13.5px; line-height: 1.6; }

    /* ===========================
       CATEGORY PILL (single)
    =========================== */
    .category-pills-container{ margin: 18px 0 0; }
    .category-pills-title{
      font-size: 12px;
      font-weight: 600;
      color: var(--text-medium);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
      display:block;
    }
    .category-pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border: 1px solid transparent;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      text-decoration:none;
      height: 32px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      transition: all 0.2s ease;
      cursor: pointer;
      white-space: nowrap;
    }
    .dark-mode .category-pill{ box-shadow: 0 1px 3px rgba(0,0,0,0.3); }
    .category-pill:hover{ transform: translateY(-1px); box-shadow: 0 3px 8px rgba(0,0,0,0.08); }
    .dark-mode .category-pill:hover{ box-shadow: 0 3px 8px rgba(0,0,0,0.35); }
    .category-icon{ font-size: 11px; opacity: 0.85; flex-shrink:0; }

    .category-pill.burnout{
      color: var(--category-burnout);
      border-color: var(--pill-burnout-border);
      background: var(--pill-burnout-bg);
    }
    .category-pill.burnout:hover{
      background: var(--pill-burnout-hover-bg);
      border-color: var(--pill-burnout-hover-border);
    }

    /* ===========================
       TOOL TOGGLE (Brand segmented control)
    =========================== */
    .tool-toggle-wrap{
      max-width:1100px;
      margin: 18px auto 0;
      padding: 0 20px 0;
      position:relative;
      z-index:2;
    }
    .tool-toggle{
      background: rgba(255,255,255,0.85);
      border:1px solid var(--border-light);
      border-radius:14px;
      padding:8px;
      display:inline-flex;
      gap:8px;
      box-shadow: 0 8px 30px rgba(123,95,196,0.10);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .dark-mode .tool-toggle{ background: rgba(20,20,20,0.6); box-shadow: 0 8px 30px rgba(0,0,0,0.3); }
    .tool-tab{
      border:none;
      cursor:pointer;
      border-radius:12px;
      padding: 12px 16px;
      font-size:14px;
      font-weight:800;
      color: var(--accent-purple-dark);
      background: transparent;
      transition: all 0.25s ease;
      display:flex; align-items:center; gap:10px;
      white-space:nowrap;
    }
    .tool-tab i{ color: var(--accent-purple); }
    .tool-tab.active{
      background: var(--premium-gradient);
      color:#fff;
      box-shadow: 0 10px 25px rgba(123,95,196,0.22);
    }
    .tool-tab.active i{ color:#fff; }

    /* ===========================
       CONTEXT & PRO TIPS
    =========================== */
    .context-tips-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:32px;
      width:100%;
      max-width:1100px;
      margin: 0 auto 40px;
      padding: 24px 20px 10px;
      margin-top: 6px;
    }
    .context-card, .tips-card{
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 28px 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .context-card, .dark-mode .tips-card{ box-shadow: 0 2px 8px rgba(0,0,0,0.22); }
    .section-title{
      font-size:20px;
      font-weight:600;
      color: var(--text-dark);
      margin-bottom:18px;
      display:flex; align-items:center; gap:10px;
      white-space: nowrap;
    }
    .section-title i{ color: var(--accent-purple); }
    .bullet-list{ list-style:none; margin:0; padding:0; }
    .bullet-list li{
      color: var(--text-medium);
      line-height:1.6;
      margin-bottom:14px;
      padding-left:26px;
      position:relative;
      font-size: 15px;
    }
    .bullet-list li::before{
      content:"•";
      position:absolute; left:10px;
      color: var(--accent-purple);
      font-size: 18px;
    }

    /* ===========================
       PANEL SHELL
    =========================== */
    .planner-shell{ max-width:1100px; margin:0 auto; padding: 0 20px 10px; }
    .planner-panel{ display:none; animation: fadeUp 0.35s ease; }
    .planner-panel.active{ display:block; }
    @keyframes fadeUp{ from{opacity:0; transform: translateY(10px);} to{opacity:1; transform: translateY(0);} }

    .planner-title-row{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:20px;
      margin: 18px 0 18px;
    }
    .planner-h2{
      font-size: 28px;
      font-weight: 700;
      color: var(--accent-purple-dark);
      line-height:1.2;
      margin-bottom: 6px;
    }
    .planner-lede{
      color: var(--text-medium);
      font-size: 15px;
      max-width: 760px;
    }
    .micro-badges{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid var(--border-light);
      background: rgba(255,255,255,0.85);
      box-shadow: 0 6px 18px rgba(0,0,0,0.05);
      font-weight: 800;
      font-size: 12px;
      color: var(--accent-purple-dark);
      white-space: nowrap;
    }
    .dark-mode .badge{ background: rgba(20,20,20,0.6); box-shadow: 0 6px 18px rgba(0,0,0,0.35); }
    .badge i{ color: var(--accent-purple); }

    /* ===========================
       ASSESSMENT UI (Slider scale like template)
    =========================== */
    .assessment-body{
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 0 16px;
    }

    .domain{
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: 14px;
      padding: 16px 16px 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 14px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .domain{ box-shadow: 0 2px 10px rgba(0,0,0,0.28); }

    .domain-head{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      cursor:pointer;
      user-select:none;
      padding-bottom: 10px;
    }

    .domain-title{
      display:flex; align-items:center; gap:10px;
      font-weight: 800;
      color: var(--text-dark);
      font-size: 16px;
      min-width: 0;
    }
    .domain-title i{ color: var(--accent-purple); }
    .domain-title .pill{
      display:inline-flex; align-items:center; gap:8px;
      background: var(--pill-burnout-bg);
      color: var(--category-burnout);
      border: 1px solid var(--pill-burnout-border);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 800;
      white-space: nowrap;
      flex-shrink:0;
    }
    .domain-meta{
      display:flex; align-items:center; gap:10px;
      color: var(--dark-gray);
      font-size: 12px;
      font-weight: 800;
      white-space: nowrap;
      flex-shrink:0;
    }
    .caret{
      width: 34px; height: 34px;
      border-radius: 50%;
      display:flex; align-items:center; justify-content:center;
      border: 1px solid var(--border-light);
      background: rgba(255,255,255,0.9);
      color: var(--accent-purple-dark);
    }
    .dark-mode .caret{ background: rgba(20,20,20,0.6); }

    .domain-items{ display:block; }
    .domain.collapsed .domain-items{ display:none; }
    .domain.collapsed .caret i{ transform: rotate(-90deg); }

    .question{
      display:flex; gap:12px;
      padding: 14px 14px;
      border-radius: 12px;
      border: 1px solid var(--border-light);
      background: var(--primary-white);
      margin-bottom: 10px;
      align-items:flex-start;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .question:hover{
      transform: translateY(-2px);
      box-shadow: 0 3px 8px rgba(0,0,0,0.10);
    }
    .dark-mode .question:hover{ box-shadow: 0 3px 8px rgba(0,0,0,0.28); }

    .q-icon{
      width: 38px; height: 38px;
      border-radius: 10px;
      display:flex; align-items:center; justify-content:center;
      flex-shrink:0;
      background: var(--lighter-purple);
      border: 1px solid rgba(123, 95, 196, 0.14);
      color: var(--accent-purple-dark);
      margin-top: 2px;
    }
    .dark-mode .q-icon{
      background: rgba(123, 95, 196, 0.18);
      border-color: rgba(157, 134, 233, 0.22);
      color: var(--accent-purple);
    }

    .q-main{ flex:1; min-width:0; display:flex; flex-direction:column; gap:10px; }
    .q-text{
      font-size: 14.5px;
      color: var(--text-medium);
      line-height: 1.45;
    }
    .q-text strong{ color: var(--text-dark); font-weight: 700; }

    /* Slider scale (whole numbers only, step=1) */
    .rating-row{
      display:flex;
      align-items:center;
      gap:12px;
      width:100%;
      justify-content:flex-start;
    }
    .slider-value-pill{
      width: 44px;
      height: 30px;
      border-radius: 10px;
      border: 1px solid rgba(123,95,196,0.22);
      background: rgba(123,95,196,0.08);
      color: var(--accent-purple-dark);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 700;
      font-size: 13px;
      flex-shrink:0;
      user-select:none;
      font-variant-numeric: tabular-nums;
    }
    .dark-mode .slider-value-pill{
      border-color: rgba(157,134,233,0.28);
      background: rgba(123,95,196,0.16);
      color: var(--accent-purple);
    }
    .slider-stack{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width: 180px;
    }
    .rating-slider{
      -webkit-appearance:none;
      appearance:none;
      width:100%;
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(123,95,196,0.35), rgba(123,95,196,0.10));
      border: 1px solid rgba(123,95,196,0.18);
      outline:none;
      cursor:pointer;
      transition: filter 0.15s ease, opacity 0.15s ease, border-color 0.15s ease;
      opacity: 0.55; /* until touched */
    }
    .dark-mode .rating-slider{
      background: linear-gradient(90deg, rgba(157,134,233,0.35), rgba(157,134,233,0.12));
      border-color: rgba(157,134,233,0.22);
    }
    .rating-slider.touched{ opacity: 1; }

    .rating-slider::-webkit-slider-thumb{
      -webkit-appearance:none;
      appearance:none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent-purple);
      border: 3px solid rgba(255,255,255,0.9);
      box-shadow: 0 8px 18px rgba(123,95,196,0.28);
    }
    .dark-mode .rating-slider::-webkit-slider-thumb{
      border-color: rgba(0,0,0,0.35);
      box-shadow: 0 10px 22px rgba(0,0,0,0.35);
    }
    .rating-slider::-moz-range-thumb{
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent-purple);
      border: 3px solid rgba(255,255,255,0.9);
      box-shadow: 0 8px 18px rgba(123,95,196,0.28);
    }
    .slider-ticks{
      display:flex;
      justify-content:space-between;
      font-size: 11px;
      color: var(--dark-gray);
      padding: 0 2px;
      user-select:none;
    }

    /* ===========================
       SCORE BAR (Template structure + brand headings)
    =========================== */
    .score-section{
      max-width: 1100px;
      margin: 25px auto 40px;
      padding: 0 0;
    }
    .score-bar{
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 30px;
      align-items: end;
      background: var(--primary-white);
      border-radius: 16px;
      padding: 22px 24px 20px;
      box-shadow: 0 8px 30px rgba(123, 95, 196, 0.12);
      border: 1px solid rgba(123, 95, 196, 0.15);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .score-bar{
      box-shadow: 0 8px 30px rgba(123, 95, 196, 0.25);
      border: 1px solid rgba(123, 95, 196, 0.35);
    }

    .score-progress{ width:100%; }
    .score-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 10px;
      gap:10px;
    }
    .score-title{
      font-size: 20px;
      font-weight: 700;
      color: var(--accent-purple-dark);
      display:flex; align-items:center; gap:10px;
    }
    .score-title i{ color: var(--accent-purple); }

    .score-value{
      font-size: 28px;
      font-weight: 600;
      color: var(--accent-purple);
      min-width: 72px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .progress-container{
      height: 10px;
      background: var(--light-gray);
      border-radius: 5px;
      overflow:hidden;
      margin-bottom: 6px;
    }
    .dark-mode .progress-container{ background: rgba(255,255,255,0.12); }

    .progress-fill{
      height:100%;
      width:0%;
      border-radius: 5px;
      transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), background 0.3s ease;
      background: var(--premium-gradient);
    }
    /* Burnout risk colouring */
    .progress-fill.stable{ background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .progress-fill.strained{ background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .progress-fill.high{ background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }

    .progress-labels{
      display:flex;
      justify-content:space-between;
      font-size: 12px;
      color: var(--dark-gray);
      font-weight: 600;
    }

    .dimension-pills{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 14px;
    }
    .dimension-pill{
      border-radius: 12px;
      padding: 10px 12px;
      min-height: 44px;
      border: 1px solid var(--border-light);
      background: var(--light-gray);
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size: 13px;
      color: var(--text-medium);
      gap:10px;
    }
    .dark-mode .dimension-pill{
      background: rgba(255,255,255,0.04);
      border-color: rgba(255,255,255,0.1);
    }
    .dimension-pill span.label{
      font-weight: 700;
      color: var(--text-dark);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .dimension-pill span.score{
      font-weight: 700;
      color: var(--accent-purple);
      min-width: 52px;
      text-align:right;
      font-variant-numeric: tabular-nums;
      white-space: nowrap;
    }

    .actions-container{
      display:flex;
      gap: 12px;
      flex-direction: column;
      justify-content:flex-end;
      align-items: stretch;
      max-width: 260px;
    }
    .action-btn{
      background: var(--premium-gradient);
      color:#fff;
      border:none;
      padding: 10px 18px;
      font-size: 13.5px;
      border-radius: 8px;
      font-weight: 700;
      cursor:pointer;
      display:flex; align-items:center; gap:8px;
      transition: all 0.3s ease;
      width: 100%;
      justify-content:center;
    }
    .action-btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(123, 95, 196, 0.3);
    }
    .action-btn.secondary{
      background: var(--light-purple);
      color: var(--accent-purple-dark);
    }
    .dark-mode .action-btn.secondary{
      background: rgba(123, 95, 196, 0.21);
      color: var(--accent-purple);
    }
    .action-btn.secondary:hover{
      background: var(--accent-purple);
      color:#fff;
    }
    .action-btn.ghost{
      background: rgba(255,255,255,0.9);
      color: var(--text-dark);
      border: 1px solid var(--border-light);
    }
    .dark-mode .action-btn.ghost{ background: rgba(20,20,20,0.6); }
    .action-btn:disabled{
      opacity: 0.5;
      cursor:not-allowed;
      transform:none !important;
      box-shadow:none !important;
    }

    /* ===========================
       SMART SUMMARY (kept, but brand)
    =========================== */
    .summary-section{
      max-width: 1100px;
      margin: 0 auto 60px;
      padding: 0 0;
      display:none;
    }
    .summary-section.active{
      display:block;
      animation: slideIn 0.5s ease;
    }
    @keyframes slideIn{
      from{ opacity:0; transform: translateY(20px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .summary-header{
      text-align:center;
      margin: 10px 0 28px;
      padding: 0 20px;
    }
    .summary-title{
      font-size: 24px;
      font-weight: 600;
      color: var(--accent-purple-dark);
      margin-bottom: 6px;
    }
    .summary-subtitle{ color: var(--text-medium); font-size: 15px; }

    .risk-pill{
      display:inline-flex; align-items:center; gap:10px;
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--border-light);
      background: rgba(255,255,255,0.9);
      box-shadow: 0 10px 20px rgba(0,0,0,0.06);
      font-weight: 800;
      font-size: 13px;
      color: var(--text-dark);
    }
    .dark-mode .risk-pill{ background: rgba(20,20,20,0.6); box-shadow: 0 10px 20px rgba(0,0,0,0.35); }
    .risk-pill .dot{ width:10px; height:10px; border-radius:50%; background: var(--success-green); }
    .risk-pill.strained .dot{ background: var(--warning-orange); }
    .risk-pill.high .dot{ background: var(--danger-red); }

    .mini-breakdown{
      max-width: 1100px;
      margin: 0 auto 18px;
      padding: 0 20px;
      display:grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 20px;
      align-items: stretch;
    }
    .break-card{
      background: rgba(255,255,255,0.9);
      border: 1px solid var(--border-light);
      border-radius: 14px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.06);
      padding: 18px 18px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .break-card{ background: rgba(20,20,20,0.6); box-shadow: 0 10px 26px rgba(0,0,0,0.35); }
    .break-title{
      font-weight: 700;
      color: var(--accent-purple-dark);
      margin-bottom: 10px;
      display:flex; align-items:center; gap:10px;
    }
    .break-title i{ color: var(--accent-purple); }
    .break-sub{
      color: var(--text-medium);
      font-size: 13.5px;
      margin-bottom: 12px;
      line-height: 1.55;
    }

    .bars .bar-row{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom: 10px;
      font-size: 12px;
      font-weight: 700;
      color: var(--text-medium);
    }
    .bars .bar{
      flex:1;
      height: 8px;
      background: var(--light-gray);
      border-radius: 999px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,0.04);
    }
    .dark-mode .bars .bar{ border-color: rgba(255,255,255,0.08); }
    .bars .fill{
      height:100%;
      width: 0%;
      background: var(--premium-gradient);
      transition: width 0.5s ease;
    }
    .bars .pct{
      min-width: 52px;
      text-align:right;
      color: var(--text-dark);
      font-variant-numeric: tabular-nums;
    }

    .section-header{
      font-size: 20px;
      font-weight: 600;
      margin: 0 auto 22px;
      display:flex; align-items:center; gap:10px;
      padding: 0 20px 10px;
      border-bottom: 2px solid var(--light-gray);
      max-width: 1100px;
      color: var(--accent-purple-dark);
    }
    .grid-3{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 0 auto 40px;
      padding: 0 20px;
      max-width: 1100px;
    }
    .card{
      background: var(--primary-white);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(123, 95, 196, 0.08);
      border: 1px solid rgba(123, 95, 196, 0.1);
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      height:100%;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .card{
      box-shadow: 0 4px 12px rgba(123, 95, 196, 0.21);
      border: 1px solid rgba(123, 95, 196, 0.25);
    }
    .card::before{
      content:'';
      position:absolute; top:0; left:0; right:0; height:3px;
      background: var(--premium-gradient);
    }
    .card.red::before{ background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }

    .card-icon{
      width: 40px; height: 40px;
      border-radius: 10px;
      display:flex; align-items:center; justify-content:center;
      margin-bottom: 14px;
      background: var(--lighter-purple);
      border: 1px solid rgba(123, 95, 196, 0.14);
      color: var(--accent-purple-dark);
      font-size: 18px;
    }
    .dark-mode .card-icon{
      background: rgba(123, 95, 196, 0.21);
      border-color: rgba(157, 134, 233, 0.22);
      color: var(--accent-purple);
    }
    .card.red .card-icon{
      background: rgba(239,68,68,0.12);
      border-color: rgba(239,68,68,0.18);
      color: var(--danger-red);
    }

    .card-title{
      font-size: 16px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 10px;
    }
    .card-desc{
      color: var(--text-medium);
      font-size: 14px;
      line-height: 1.55;
      flex-grow: 1;
      white-space: pre-wrap;
    }
    .card-link{
      margin-top: 14px;
      text-decoration:none;
      font-weight: 700;
      color: var(--accent-purple);
      display:flex; align-items:center; gap:8px;
      font-size: 14px;
    }
    .card-link:hover{ text-decoration: underline; }

    /* ===========================
       PLAN BUILDER (kept)
    =========================== */
    .worksheet-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 10px auto 18px;
      max-width: 1100px;
    }
    .worksheet-card{
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 22px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .worksheet-card{ box-shadow: 0 2px 8px rgba(0,0,0,0.22); }
    .worksheet-card.full{ grid-column: 1 / -1; }

    .field-title{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
    }
    .field-title h4{
      font-size: 16px;
      font-weight: 700;
      color: var(--text-dark);
      display:flex; align-items:center; gap: 10px;
    }
    .field-title h4 i{ color: var(--accent-purple); }
    .hint{ font-size: 12px; color: var(--dark-gray); font-weight: 700; white-space:nowrap; }

    .input,.textarea,.select{
      width:100%;
      border: 1px solid var(--border-light);
      background: var(--primary-white);
      border-radius: 10px;
      padding: 12px 12px;
      font-size: 14px;
      color: var(--text-dark);
      outline:none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease, color 0.3s ease;
    }
    .textarea{ min-height: 110px; resize: vertical; }
    .input:focus,.textarea:focus,.select:focus{
      border-color: rgba(123,95,196,0.55);
      box-shadow: 0 0 0 4px rgba(123,95,196,0.14);
    }

    .slider-row{ margin-top: 10px; }
    .slider-top{
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom: 10px;
      gap:10px;
    }
    .slider-top .label{
      font-size: 13px;
      font-weight: 700;
      color: var(--text-medium);
    }
    .slider-top .value{
      font-size: 13px;
      font-weight: 700;
      color: var(--accent-purple-dark);
      background: rgba(123,95,196,0.10);
      border: 1px solid rgba(123,95,196,0.18);
      padding: 6px 10px;
      border-radius: 999px;
      white-space:nowrap;
      font-variant-numeric: tabular-nums;
    }

    .range{ width:100%; }

    .plan-actions{
      max-width: 1100px;
      margin: 14px auto 24px;
      display:flex;
      gap: 12px;
      justify-content:flex-end;
      flex-wrap:wrap;
      padding: 0 0;
    }

    .plan-output{
      max-width: 1100px;
      margin: 0 auto 40px;
      border: 1px solid rgba(123,95,196,0.18);
      background: rgba(255,255,255,0.9);
      border-radius: 14px;
      box-shadow: 0 10px 30px rgba(123,95,196,0.10);
      padding: 20px;
      display:none;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode .plan-output{ background: rgba(20,20,20,0.6); box-shadow: 0 10px 30px rgba(0,0,0,0.35); border-color: rgba(123,95,196,0.28); }
    .plan-output.active{ display:block; animation: slideIn 0.5s ease; }

    .plan-output h3{
      font-size: 18px;
      font-weight: 700;
      color: var(--accent-purple-dark);
      margin-bottom: 10px;
      display:flex; align-items:center; gap:10px;
    }
    .plan-output h3 i{ color: var(--accent-purple); }

    .summary-box{
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 16px;
      font-size: 14px;
      color: var(--text-medium);
      line-height: 1.7;
      white-space: pre-wrap;
      transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }

    /* ===========================
       FOOTER
    =========================== */
    footer{
      background: var(--primary-white);
      padding: 20px 0;
      border-top: 1px solid var(--border-light);
      margin-top: 30px;
      text-align:center;
      color: var(--text-medium);
      transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }

    /* ===========================
       RESPONSIVE
    =========================== */
    @media (max-width:1024px){
      .context-tips-grid{ grid-template-columns: 1fr; gap:24px; }
      .grid-3{ grid-template-columns: repeat(2,1fr); }
      .mini-breakdown{ grid-template-columns: 1fr; }
      .score-bar{ grid-template-columns: 1fr; }
      .actions-container{ max-width: 100%; flex-direction: row; flex-wrap: wrap; }
      .actions-container .action-btn{ width: auto; flex: 1; min-width: 200px; }
      .worksheet-grid{ grid-template-columns: 1fr; }
      .plan-actions{ justify-content: stretch; }
      .plan-actions .action-btn{ flex: 1; min-width: 200px; }
    }
    @media (max-width:768px){
      .hero-main-heading{ font-size: 40px; }
      .actions-container{ flex-direction: column; }
      .actions-container .action-btn{ width: 100%; min-width: 0; }
      .plan-actions .action-btn{ width: 100%; min-width: 0; }
      .grid-3{ grid-template-columns: 1fr; }
    }
    @media (max-width:480px){
      .hero-main-heading{ font-size: 34px; }
      .checklist-name{ font-size: 18px; }
      .summary-title{ font-size: 22px; }
    }
  </style>
</head>

<body>

<!-- ===========================
     NAVIGATION
=========================== -->
<nav>
  <div class="container nav-container">
    <button class="mobile-toggle" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>

    <a href="index.html" class="logo" aria-label="Home">
      <img src="assets/img/logo.png" alt="The Employee Playbook" class="logo-img">
    </a>

    <div class="nav-links">
      <a href="the-lens.html" class="nav-link">The Lens</a>
      <a href="the-toolkit.html" class="nav-link">The Toolkit</a>
      <div class="nav-link-container">
        <a href="the-coach.html" class="nav-link">The Coach</a>
        <span class="new-tag">NEW</span>
      </div>
      <a href="the-shift.html" class="nav-link">The Shift</a>
      <a href="the-pricing.html" class="nav-link">The Pricing</a>

      <!-- Mobile CTAs -->
      <a href="sign-in.html" class="mobile-sign-in">Sign In</a>
      <a href="create-account.html" class="mobile-sign-up">Sign Up</a>
    </div>

    <div class="nav-actions">
      <!-- NOTE: you asked previously to swap these when signed in; keep your auth JS to flip these labels/links -->
      <a href="create-account.html" class="header-cta" data-auth="cta-primary">Sign up</a>
      <a href="sign-in.html" class="sign-in" data-auth="cta-secondary">Sign in</a>
      <button class="theme-toggle" aria-label="Toggle theme"><i class="fa-solid fa-moon"></i></button>
    </div>
  </div>
</nav>

<!-- ===========================
     HERO
=========================== -->
<div class="tool-hero-section">
  <div class="tool-hero-content">
    <span class="checklist-name">EXPECTATIONS, BURNOUT &amp; CAPACITY</span>
    <h1 class="hero-main-heading">Burnout Warning Assessment: Spot It Early, Protect Performance, Protect You</h1>

    <div class="hero-subheading">
      Burnout usually isn’t “one bad day”, it’s <strong>compounding strain</strong>: sleep debt, constant urgency, emotional load, and no recovery windows.
      <br/>This tool helps you <strong>measure the warning signs</strong> and produce a <strong>short, decisive protection plan</strong> you can act on this week.
    </div>

    <div class="category-pills-container" aria-label="Category">
      <span class="category-pills-title">Category</span>
      <span class="category-pill burnout" role="link" tabindex="0">
        <i class="fas fa-battery-half category-icon"></i> Expectations, Burnout &amp; Capacity
      </span>
    </div>

    <div class="hero-note" role="note" aria-label="Important note">
      <i class="fa-solid fa-circle-info"></i>
      <span>
        <strong>This is not a medical diagnosis.</strong> If you feel unsafe, unable to cope, or symptoms are severe/persistent, please seek professional support.
        <br>In the UK you can contact <strong>NHS 111</strong> for urgent advice, or <strong>999</strong> in an emergency.
      </span>
    </div>
  </div>

  <div class="tool-toggle-wrap">
    <div class="tool-toggle" role="tablist" aria-label="Assessment switch">
      <button class="tool-tab active" id="tabAssessment" role="tab" aria-selected="true" aria-controls="panelAssessment">
        <i class="fa-solid fa-triangle-exclamation"></i> Burnout Warning Assessment
      </button>
      <button class="tool-tab" id="tabPlan" role="tab" aria-selected="false" aria-controls="panelPlan">
        <i class="fa-solid fa-shield-heart"></i> Protection Plan Builder
      </button>
    </div>
  </div>
</div>

<!-- ===========================
     CONTEXT & PRO TIPS
=========================== -->
<div class="context-tips-grid">
  <div class="context-card">
    <h3 class="section-title"><i class="fa-solid fa-calendar-check"></i><span>When to Use This Assessment</span></h3>
    <ul class="bullet-list">
      <li>When your tolerance is dropping (irritability, impatience, low resilience)</li>
      <li>When you’re “busy” but output quality is slipping or taking longer than it should</li>
      <li>When you’re running on adrenaline then crashing hard after meetings or deadlines</li>
      <li>When sleep doesn’t restore you and weekends don’t reset you</li>
      <li>When you’re starting to dread work, people, or “just one more message”</li>
    </ul>
  </div>

  <div class="tips-card">
    <h3 class="section-title"><i class="fa-solid fa-lightbulb"></i><span>Pro Tips</span></h3>
    <ul class="bullet-list">
      <li><strong>Answer based on the last 10–14 days.</strong> One-off bad days aren’t the point.</li>
      <li><strong>Don’t minimise “small” symptoms.</strong> Burnout is often death by a thousand cuts.</li>
      <li><strong>Look for pattern + persistence.</strong> Repeating signals matter more than intensity.</li>
      <li><strong>Use the plan builder.</strong> Insight without a protection move is just awareness.</li>
      <li><strong>Protect your reputation.</strong> Burnout doesn’t just harm you — it can quietly damage perception.</li>
    </ul>
  </div>
</div>

<!-- ===========================
     PANELS
=========================== -->
<div class="planner-shell">

  <!-- ===========================
       PANEL: ASSESSMENT
  =========================== -->
  <div class="planner-panel active" id="panelAssessment" role="tabpanel" aria-labelledby="tabAssessment">

    <div class="planner-title-row">
      <div>
        <div class="planner-h2">Burnout Warning Assessment</div>
        <div class="planner-lede">
          Slide each item from <strong>0–10</strong> based on the last 10–14 days.
          This gives you a clear level and shows which domain is driving the risk.
        </div>
      </div>
      <div class="micro-badges">
        <span class="badge"><i class="fa-solid fa-radar"></i> Spot early signals</span>
        <span class="badge"><i class="fa-solid fa-umbrella"></i> Build protection</span>
      </div>
    </div>

    <div class="assessment-body" id="assessmentBody">
      <!-- Domains injected by JS -->
    </div>

    <!-- Score Bar -->
    <div class="score-section">
      <div class="score-bar">
        <div class="score-progress">
          <div class="score-header">
            <div class="score-title"><i class="fa-solid fa-fire"></i> Burnout Warning Level</div>
            <div class="score-value" id="burnoutPct">0%</div>
          </div>

          <div class="progress-container">
            <div class="progress-fill stable" id="burnoutFill"></div>
          </div>

          <div class="progress-labels">
            <span>Stable</span>
            <span>Strained</span>
            <span>High Risk</span>
            <span>Critical</span>
          </div>

          <div class="dimension-pills" aria-label="Domain breakdown">
            <div class="dimension-pill"><span class="label">Energy</span><span class="score" id="dim_energy">0%</span></div>
            <div class="dimension-pill"><span class="label">Cognition</span><span class="score" id="dim_cognitive">0%</span></div>
            <div class="dimension-pill"><span class="label">Emotional</span><span class="score" id="dim_emotional">0%</span></div>
            <div class="dimension-pill"><span class="label">Recovery</span><span class="score" id="dim_recovery">0%</span></div>
          </div>
        </div>

        <div class="actions-container">
          <button class="action-btn" id="btnGenerate" onclick="generateSummary()" disabled>
            <i class="fa-solid fa-wand-magic"></i> Generate Summary
          </button>
          <button class="action-btn secondary" id="btnCopy" onclick="copySummary()">
            <i class="fa-regular fa-copy"></i> Copy Output
          </button>
          <button class="action-btn ghost" id="btnReset" onclick="resetAssessment()">
            <i class="fa-solid fa-rotate-left"></i> Reset
          </button>
        </div>
      </div>
    </div>

    <!-- Summary -->
    <div class="summary-section" id="summarySection">
      <div class="summary-header">
        <h2 class="summary-title">Your Burnout Warning Summary</h2>
        <p class="summary-subtitle">Based on your sliders (last 10–14 days).</p>
        <div class="risk-pill" id="riskPill">
          <span class="dot"></span>
          <span id="riskLabel">Stable</span>
          <span>•</span>
          <span><strong id="riskPctInline">0%</strong></span>
        </div>
      </div>

      <div class="mini-breakdown">
        <div class="break-card">
          <div class="break-title"><i class="fa-solid fa-chart-simple"></i>What’s driving your score</div>
          <div class="break-sub">Highest domain = your fastest intervention lever.</div>
          <div class="bars" id="domainBars"></div>
        </div>

        <div class="break-card">
          <div class="break-title"><i class="fa-solid fa-bullseye"></i>What this means in real life</div>
          <div class="break-sub" id="meaningText">Answer at least one item to generate your interpretation.</div>
          <div class="break-sub" id="protectText" style="margin-top:10px;">
            <strong>Next:</strong> Use the <em>Protection Plan Builder</em> tab to turn this into one boundary + one recovery rule you can actually keep.
          </div>
        </div>
      </div>

      <h3 class="section-header"><i class="fa-solid fa-triangle-exclamation"></i> The Red Flags to Take Seriously</h3>
      <div class="grid-3" id="redFlagsGrid"></div>

      <h3 class="section-header"><i class="fa-solid fa-forward"></i> The Moves That Reduce Risk Fast</h3>
      <div class="grid-3" id="nextMovesGrid"></div>

      <h3 class="section-header"><i class="fa-solid fa-toolbox"></i> Recommended Tools (High Impact)</h3>
      <div class="grid-3" id="toolsGrid"></div>
    </div>

  </div>

  <!-- ===========================
       PANEL: PLAN BUILDER
  =========================== -->
  <div class="planner-panel" id="panelPlan" role="tabpanel" aria-labelledby="tabPlan">

    <div class="planner-title-row">
      <div>
        <div class="planner-h2">Protection Plan Builder</div>
        <div class="planner-lede">
          Turn awareness into action. Identify the <strong>drivers</strong>, choose a <strong>non-negotiable protection move</strong>,
          and write a <strong>short operating rule</strong> that stops burnout quietly returning.
        </div>
      </div>
      <div class="micro-badges">
        <span class="badge"><i class="fa-solid fa-shield-heart"></i> Reduce strain</span>
        <span class="badge"><i class="fa-solid fa-comment-dots"></i> Prepare a conversation</span>
        <span class="badge"><i class="fa-solid fa-calendar-days"></i> Lock a 2-week reset</span>
      </div>
    </div>

    <div class="worksheet-grid">
      <div class="worksheet-card full">
        <div class="field-title">
          <h4><i class="fa-solid fa-pen-nib"></i> Your situation in one sentence</h4>
          <span class="hint">Clarity beats chaos</span>
        </div>
        <input class="input" id="sitSentence" placeholder="Example: 'I’m delivering, but I’m constantly reactive and exhausted by midweek.'" />
      </div>

      <div class="worksheet-card full">
        <div class="field-title">
          <h4><i class="fa-solid fa-bolt"></i> Top 3 drivers (what’s actually draining you)</h4>
          <span class="hint">Be specific</span>
        </div>
        <textarea class="textarea" id="drivers" placeholder="Example: 1) constant 'urgent' messages 2) unclear success criteria 3) emotional load from a stakeholder..."></textarea>
      </div>

      <div class="worksheet-card">
        <div class="field-title">
          <h4><i class="fa-solid fa-bed"></i> Sleep debt</h4>
          <span class="hint">1 = none, 10 = heavy</span>
        </div>
        <div class="slider-row">
          <div class="slider-top">
            <div class="label">How depleted are you?</div>
            <div class="value"><span id="sleepDebtVal">5</span>/10</div>
          </div>
          <input class="range" id="sleepDebt" type="range" min="1" max="10" value="5" />
        </div>
      </div>

      <div class="worksheet-card">
        <div class="field-title">
          <h4><i class="fa-solid fa-heart-crack"></i> Emotional load</h4>
          <span class="hint">1 = light, 10 = heavy</span>
        </div>
        <div class="slider-row">
          <div class="slider-top">
            <div class="label">How much emotional weight?</div>
            <div class="value"><span id="emoLoadVal">5</span>/10</div>
          </div>
          <input class="range" id="emoLoad" type="range" min="1" max="10" value="5" />
        </div>
      </div>

      <div class="worksheet-card">
        <div class="field-title">
          <h4><i class="fa-solid fa-hand"></i> One protection move</h4>
          <span class="hint">Non-negotiable</span>
        </div>
        <input class="input" id="protectionMove" placeholder="Example: 'No meetings 09:00–11:00 Tue/Thu' or 'Daily 45-min focus block'" />
      </div>

      <div class="worksheet-card">
        <div class="field-title">
          <h4><i class="fa-solid fa-signal"></i> One recovery rule</h4>
          <span class="hint">Keep it realistic</span>
        </div>
        <input class="input" id="recoveryRule" placeholder="Example: 'Hard stop 18:00 + 20-min walk' or 'Lunch away from screen'"/>
      </div>

      <div class="worksheet-card full">
        <div class="field-title">
          <h4><i class="fa-solid fa-comments"></i> If you need a conversation, who is it with?</h4>
          <span class="hint">Pick the channel</span>
        </div>
        <select class="select" id="whoWith">
          <option value="My manager">My manager</option>
          <option value="A project lead / stakeholder">A project lead / stakeholder</option>
          <option value="HR / People team">HR / People team</option>
          <option value="My team">My team</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div class="worksheet-card full">
        <div class="field-title">
          <h4><i class="fa-solid fa-microphone-lines"></i> Draft a 3-line opener (calm, factual, outcome-led)</h4>
          <span class="hint">No over-explaining</span>
        </div>
        <textarea class="textarea" id="opener" placeholder="Example:
1) 'I want to align on priorities for the next two weeks.'
2) 'Right now the workload is exceeding capacity and it’s creating risk.'
3) 'I need to agree what we pause/de-scope, and what “good” looks like for the top deliverable.'"></textarea>
      </div>

      <div class="worksheet-card full">
        <div class="field-title">
          <h4><i class="fa-solid fa-calendar-check"></i> Your 2-week reset plan (simple)</h4>
          <span class="hint">Focus + recovery</span>
        </div>
        <textarea class="textarea" id="twoWeekPlan" placeholder="Example: Week 1: reduce meetings, deliver 1 must-win output, schedule recovery. Week 2: stabilise, tighten boundaries, prevent rework..."></textarea>
      </div>
    </div>

    <div class="plan-actions">
      <button class="action-btn" onclick="generatePlan()" id="planGenerateBtn">
        <i class="fa-solid fa-wand-magic"></i> Generate Plan Output
      </button>
      <button class="action-btn secondary" onclick="copyPlan()" id="planCopyBtn">
        <i class="fa-regular fa-copy"></i> Copy Plan
      </button>
      <button class="action-btn ghost" onclick="resetPlan()" id="planResetBtn">
        <i class="fa-solid fa-rotate-left"></i> Reset
      </button>
    </div>

    <div class="plan-output" id="planOutput">
      <h3><i class="fa-solid fa-file-lines"></i> Your Burnout Protection Plan Output</h3>
      <div class="summary-box" id="planBox"></div>
    </div>
  </div>

</div>

<!-- ===========================
     FOOTER
=========================== -->
<footer>
  <div class="container">
    <p>© 2026 The Employee Playbook. All rights reserved.</p>
  </div>
</footer>

<script>
/* =========================================================
   STORAGE + DATA
========================================================= */
const STORAGE_KEY = "tep_burnout_assessment_slider_v1";

const DOMAINS = [
  {
    id: "energy",
    title: "Energy & Body Signals",
    pill: "Depletion",
    icon: "fa-battery-quarter",
    questions: [
      { id: "e1", text: "<strong>I wake up tired</strong> (even after enough hours), and it lingers into the day." },
      { id: "e2", text: "<strong>I’m running on adrenaline</strong> — I push through, then crash." },
      { id: "e3", text: "<strong>Small tasks feel heavy</strong> (they take more effort than they should)." },
      { id: "e4", text: "<strong>My body is signalling strain</strong> (headaches, tight chest, stomach issues, muscle tension)." }
    ]
  },
  {
    id: "cognitive",
    title: "Cognition & Performance Drift",
    pill: "Clarity Loss",
    icon: "fa-brain",
    questions: [
      { id: "c1", text: "<strong>I’m slower to think</strong>, or it takes longer to start/finish work." },
      { id: "c2", text: "<strong>I forget details</strong> or miss things I normally wouldn’t." },
      { id: "c3", text: "<strong>Decision fatigue</strong>: choosing/organising feels exhausting." },
      { id: "c4", text: "<strong>My quality drops</strong> because I’m rushing, scattered, or reworking." }
    ]
  },
  {
    id: "emotional",
    title: "Emotional Load & Behaviour Shifts",
    pill: "Tolerance Drop",
    icon: "fa-face-tired",
    questions: [
      { id: "m1", text: "<strong>I’m more irritable</strong>, cynical, or impatient than usual." },
      { id: "m2", text: "<strong>I feel detached</strong> (numb, switched off, or “I just don’t care”)." },
      { id: "m3", text: "<strong>I dread interaction</strong> (messages, meetings, people) more than the work itself." },
      { id: "m4", text: "<strong>I’m emotionally reactive</strong> (snappy, tearful, or easily overwhelmed)." }
    ]
  },
  {
    id: "recovery",
    title: "Boundaries, Recovery & Sustainability",
    pill: "No Reset",
    icon: "fa-shield-halved",
    questions: [
      { id: "r1", text: "<strong>I struggle to switch off</strong> after work (mind won’t settle)." },
      { id: "r2", text: "<strong>I’ve lost recovery routines</strong> (sleep, meals, movement, breaks)." },
      { id: "r3", text: "<strong>Work is bleeding</strong> into evenings/weekends just to stay afloat." },
      { id: "r4", text: "<strong>I have no protected focus time</strong> — the day is chopped into interruptions." },
      { id: "r5", text: "<strong>I feel trapped</strong>: no real control, no clean exit from the pressure loop." }
    ]
  }
];

// state: { [questionId]: 0..10 }
let state = {};

/* =========================================================
   INIT
========================================================= */
document.addEventListener("DOMContentLoaded", () => {
  document.body.classList.add("loaded");

  // theme toggle
  const themeBtn = document.querySelector(".theme-toggle");
  if (themeBtn){
    themeBtn.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark-mode");
      const isDark = document.documentElement.classList.contains("dark-mode");
      try { localStorage.setItem("theme", isDark ? "dark" : "light"); } catch(e) {}
      themeBtn.innerHTML = isDark ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
    });

    // set icon on load
    const isDark = document.documentElement.classList.contains("dark-mode");
    themeBtn.innerHTML = isDark ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
  }

  // mobile nav toggle
  const mobileToggle = document.querySelector(".mobile-toggle");
  const navLinks = document.querySelector(".nav-links");
  if (mobileToggle && navLinks){
    mobileToggle.addEventListener("click", function(){
      navLinks.classList.toggle("active");
      const icon = this.querySelector("i");
      icon.classList.toggle("fa-bars");
      icon.classList.toggle("fa-xmark");
    });

    document.addEventListener("click", function(event){
      if (navLinks.classList.contains("active") &&
          !navLinks.contains(event.target) &&
          !mobileToggle.contains(event.target)) {
        navLinks.classList.remove("active");
        const icon = mobileToggle.querySelector("i");
        icon.classList.add("fa-bars");
        icon.classList.remove("fa-xmark");
      }
    });
  }

  // tabs
  document.getElementById("tabAssessment").addEventListener("click", () => switchPanel("assessment"));
  document.getElementById("tabPlan").addEventListener("click", () => switchPanel("plan"));

  // plan sliders
  wireSlider("sleepDebt", "sleepDebtVal");
  wireSlider("emoLoad", "emoLoadVal");

  // load + render
  loadState();
  renderAssessment();
  updateScore();
});

/* =========================================================
   TABS
========================================================= */
function switchPanel(which){
  const tabA = document.getElementById("tabAssessment");
  const tabP = document.getElementById("tabPlan");
  const panelA = document.getElementById("panelAssessment");
  const panelP = document.getElementById("panelPlan");

  if (which === "assessment") {
    tabA.classList.add("active");
    tabP.classList.remove("active");
    tabA.setAttribute("aria-selected", "true");
    tabP.setAttribute("aria-selected", "false");
    panelA.classList.add("active");
    panelP.classList.remove("active");
    window.scrollTo({ top: 0, behavior: "smooth" });
  } else {
    tabP.classList.add("active");
    tabA.classList.remove("active");
    tabP.setAttribute("aria-selected", "true");
    tabA.setAttribute("aria-selected", "false");
    panelP.classList.add("active");
    panelA.classList.remove("active");
    window.scrollTo({ top: 0, behavior: "smooth" });
  }
}

/* =========================================================
   RENDER ASSESSMENT (slider scale 0-10)
========================================================= */
function renderAssessment(){
  const container = document.getElementById("assessmentBody");
  container.innerHTML = "";

  DOMAINS.forEach(domain => {
    const domainEl = document.createElement("div");
    domainEl.className = "domain";
    domainEl.dataset.domain = domain.id;

    const answeredCount = domain.questions.filter(q => typeof state[q.id] === "number").length;

    const head = document.createElement("div");
    head.className = "domain-head";
    head.innerHTML = `
      <div class="domain-title">
        <i class="fa-solid ${domain.icon}"></i>
        <span style="min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${domain.title}</span>
        <span class="pill"><i class="fa-solid fa-layer-group"></i> ${domain.pill}</span>
      </div>
      <div class="domain-meta">
        <span><span id="count_${domain.id}">${answeredCount}</span> / ${domain.questions.length} answered</span>
        <span class="caret" aria-hidden="true"><i class="fa-solid fa-chevron-down"></i></span>
      </div>
    `;

    head.addEventListener("click", () => domainEl.classList.toggle("collapsed"));

    const items = document.createElement("div");
    items.className = "domain-items";

    domain.questions.forEach(q => {
      const qEl = document.createElement("div");
      qEl.className = "question";
      qEl.dataset.qid = q.id;

      const chosen = (typeof state[q.id] === "number") ? state[q.id] : 0;

      qEl.innerHTML = `
        <div class="q-icon"><i class="fa-solid fa-circle-question"></i></div>
        <div class="q-main">
          <div class="q-text">${q.text}</div>

          <div class="rating-row">
            <div class="slider-value-pill" id="val_${q.id}">${chosen}</div>
            <div class="slider-stack">
              <input
                class="rating-slider ${typeof state[q.id] === "number" ? "touched" : ""}"
                id="slider_${q.id}"
                type="range"
                min="0"
                max="10"
                step="1"
                value="${chosen}"
                aria-label="Rating 0 to 10"
              />
              <div class="slider-ticks" aria-hidden="true">
                <span>0</span><span>2</span><span>4</span><span>6</span><span>8</span><span>10</span>
              </div>
            </div>
          </div>
        </div>
      `;

      const slider = qEl.querySelector(`#slider_${q.id}`);
      const valPill = qEl.querySelector(`#val_${q.id}`);

      slider.addEventListener("input", () => {
        valPill.textContent = slider.value;
      });

      slider.addEventListener("change", () => {
        slider.classList.add("touched");
        state[q.id] = Number(slider.value);
        saveState();
        updateScore();
      });

      items.appendChild(qEl);
    });

    domainEl.appendChild(head);
    domainEl.appendChild(items);
    container.appendChild(domainEl);
  });

  updateDomainCounts();
}

/* =========================================================
   SCORING
========================================================= */
function getAllQuestions(){
  const list = [];
  DOMAINS.forEach(d => d.questions.forEach(q => list.push({ domain: d.id, ...q })));
  return list;
}

function updateDomainCounts(){
  DOMAINS.forEach(d => {
    const answered = d.questions.filter(q => typeof state[q.id] === "number").length;
    const el = document.getElementById(`count_${d.id}`);
    if (el) el.textContent = answered;
  });
}

function computeTotals(){
  const all = getAllQuestions();
  const answered = all.filter(q => typeof state[q.id] === "number");
  const max = all.length * 10;
  const raw = answered.reduce((sum, q) => sum + state[q.id], 0);
  const pct = max > 0 ? Math.round((raw / max) * 100) : 0;

  const byDomain = {};
  DOMAINS.forEach(d => {
    const domMax = d.questions.length * 10;
    const domRaw = d.questions.reduce((sum, q) => sum + (typeof state[q.id] === "number" ? state[q.id] : 0), 0);
    const domPct = domMax > 0 ? Math.round((domRaw / domMax) * 100) : 0;
    byDomain[d.id] = { raw: domRaw, pct: domPct, max: domMax };
  });

  return { allCount: all.length, answeredCount: answered.length, max, raw, pct, byDomain };
}

/* Bands aligned to burnout logic */
function riskBand(pct){
  if (pct >= 75) return { label: "CRITICAL", cls: "high", meaning: "You’re in a zone where judgement, performance and health are likely to degrade unless something changes quickly. Treat this as a protection problem, not a motivation problem." };
  if (pct >= 50) return { label: "HIGH RISK", cls: "high", meaning: "Your system is running too hot. Without a boundary + recovery rule, you’re likely to slide into visible performance issues or emotional volatility." };
  if (pct >= 25) return { label: "STRAINED", cls: "strained", meaning: "You’re showing early strain. The fastest win is usually reducing false urgency and reclaiming one protected focus/recovery window." };
  return { label: "STABLE", cls: "stable", meaning: "You look broadly stable. Keep protective routines in place and watch for creeping urgency, sleep debt, and loss of recovery time." };
}

function updateScore(){
  updateDomainCounts();

  const totals = computeTotals();
  const pct = totals.pct;

  // update top display
  document.getElementById("burnoutPct").textContent = pct + "%";

  // progress bar
  const fill = document.getElementById("burnoutFill");
  fill.style.width = pct + "%";
  fill.classList.remove("stable","strained","high");

  if (pct >= 50) fill.classList.add("high");
  else if (pct >= 25) fill.classList.add("strained");
  else fill.classList.add("stable");

  // update domain pills
  const by = totals.byDomain;
  document.getElementById("dim_energy").textContent = (by.energy?.pct ?? 0) + "%";
  document.getElementById("dim_cognitive").textContent = (by.cognitive?.pct ?? 0) + "%";
  document.getElementById("dim_emotional").textContent = (by.emotional?.pct ?? 0) + "%";
  document.getElementById("dim_recovery").textContent = (by.recovery?.pct ?? 0) + "%";

  // enable generate when at least 4 answers
  document.getElementById("btnGenerate").disabled = totals.answeredCount < 4;

  // summary pill sync
  const band = riskBand(pct);
  const pill = document.getElementById("riskPill");
  pill.classList.remove("strained","high");
  if (band.cls === "strained") pill.classList.add("strained");
  if (band.cls === "high") pill.classList.add("high");

  document.getElementById("riskLabel").textContent = band.label;
  document.getElementById("riskPctInline").textContent = pct + "%";

  // meaning text
  document.getElementById("meaningText").textContent =
    (totals.answeredCount < 1) ? "Answer at least one item to generate your interpretation." : band.meaning;
}

/* =========================================================
   SUMMARY BUILD
========================================================= */
function generateSummary(){
  const totals = computeTotals();
  const pct = totals.pct;
  const band = riskBand(pct);

  // reveal
  const section = document.getElementById("summarySection");
  section.classList.add("active");
  section.scrollIntoView({ behavior: "smooth" });

  // pill + meaning
  const pill = document.getElementById("riskPill");
  pill.classList.remove("strained","high");
  if (band.cls === "strained") pill.classList.add("strained");
  if (band.cls === "high") pill.classList.add("high");
  document.getElementById("riskLabel").textContent = band.label;
  document.getElementById("riskPctInline").textContent = pct + "%";
  document.getElementById("meaningText").textContent = band.meaning;

  // domain bars
  const bars = document.getElementById("domainBars");
  bars.innerHTML = "";
  const domainOrder = [...DOMAINS].map(d => ({
    id: d.id,
    title: d.title,
    pct: totals.byDomain[d.id].pct
  })).sort((a,b) => b.pct - a.pct);

  domainOrder.forEach(d => {
    const row = document.createElement("div");
    row.className = "bar-row";
    row.innerHTML = `
      <span style="min-width: 180px; font-weight: 700;">${d.title}</span>
      <div class="bar"><div class="fill" style="width:${d.pct}%"></div></div>
      <span class="pct">${d.pct}%</span>
    `;
    bars.appendChild(row);
  });

  buildRedFlags(pct, totals.byDomain);
  buildNextMoves(pct, totals.byDomain, domainOrder[0]?.id);
  buildTools(pct, totals.byDomain);
}

function buildRedFlags(pct, byDomain){
  const grid = document.getElementById("redFlagsGrid");
  grid.innerHTML = "";

  const flags = [];

  if ((byDomain.recovery?.pct ?? 0) >= 50) {
    flags.push({
      icon: "fa-shield-halved",
      title: "Recovery has been removed from the system",
      desc: "If there’s no protected reset time, strain becomes your default state. Your tolerance drops first; your judgement goes next."
    });
  }
  if ((byDomain.cognitive?.pct ?? 0) >= 50) {
    flags.push({
      icon: "fa-brain",
      title: "Cognitive drift (quiet performance risk)",
      desc: "Slowness, errors, rework and decision fatigue often show up before visible burnout. This can harm confidence and reputation if ignored."
    });
  }
  if ((byDomain.emotional?.pct ?? 0) >= 50) {
    flags.push({
      icon: "fa-face-tired",
      title: "Tolerance collapse (people risk)",
      desc: "Irritability, cynicism, detachment or dread are often the ‘I’m running out of buffer’ signals. This can distort how situations feel and escalate conflict."
    });
  }
  if ((byDomain.energy?.pct ?? 0) >= 50) {
    flags.push({
      icon: "fa-battery-quarter",
      title: "Body warning signs (don’t override them)",
      desc: "When the body is consistently signalling strain, pushing harder usually worsens the recovery timeline. Treat this as a capacity issue, not a grit test."
    });
  }

  if (flags.length < 3) {
    flags.push({
      icon: "fa-fire",
      title: "Compounding strain is underway",
      desc: "Even moderate scores become high risk when nothing changes. Your job is to reduce the pressure source, not just ‘cope better’."
    });
  }
  while (flags.length < 3) {
    flags.push({
      icon: "fa-triangle-exclamation",
      title: "A single trigger could tip you over",
      desc: "When you’re near capacity, a new project, a difficult stakeholder or a messy deadline can create a rapid drop. Build protection before that happens."
    });
  }

  flags.slice(0,3).forEach(f => {
    const card = document.createElement("div");
    card.className = "card red";
    card.innerHTML = `
      <div class="card-icon"><i class="fa-solid ${f.icon}"></i></div>
      <div class="card-title">${f.title}</div>
      <div class="card-desc">${f.desc}</div>
    `;
    grid.appendChild(card);
  });
}

function buildNextMoves(pct, byDomain, topDomainId){
  const grid = document.getElementById("nextMovesGrid");
  grid.innerHTML = "";

  const moves = [];

  moves.push({
    icon: "fa-bullseye",
    title: "Choose the one must-win outcome",
    desc: "If everything matters, you’ll burn fuel without momentum. Pick one outcome that defines success for the next 7 days."
  });

  if (pct >= 75) {
    moves.push({
      icon: "fa-scissors",
      title: "Make a hard cut (today)",
      desc: "Delay, de-scope, or reassign one significant chunk. If nothing changes, your body is being asked to fund the gap."
    });
    moves.push({
      icon: "fa-shield-heart",
      title: "Install a protection rule",
      desc: "Block 2×90 minutes focus OR one daily recovery anchor. Then defend it like a deadline."
    });
  } else if (pct >= 50) {
    moves.push({
      icon: "fa-clock",
      title: "Stop false urgency",
      desc: "Create one rule: priority confirmations happen at set times (e.g., once daily), not continuously."
    });
    moves.push({
      icon: "fa-check-double",
      title: "Reduce rework by defining “good” early",
      desc: "Confirm format, depth and sign-off criteria before you invest effort in the top deliverable."
    });
  } else {
    moves.push({
      icon: "fa-compass",
      title: "Prevent drift with a midweek reset",
      desc: "10 minutes: check scope creep, stakeholder pulls, and what you’re quietly absorbing."
    });
    moves.push({
      icon: "fa-sun",
      title: "Protect your best hours",
      desc: "Put high-cognition work in your best energy window and push admin/reactive tasks elsewhere."
    });
  }

  if (topDomainId === "recovery") {
    moves.push({
      icon: "fa-bed",
      title: "Put recovery back on the calendar",
      desc: "Recovery can’t be an ‘if there’s time’ item. Choose one daily anchor (lunch off-screen, walk, early stop)."
    });
  } else if (topDomainId === "cognitive") {
    moves.push({
      icon: "fa-layer-group",
      title: "Reduce cognitive load (fewer threads)",
      desc: "One major deliverable beats five half-done threads. Fewer contexts = better quality + faster completion."
    });
  } else if (topDomainId === "emotional") {
    moves.push({
      icon: "fa-user-shield",
      title: "Contain the emotional drain",
      desc: "Identify the person/dynamic that costs the most energy and design limits: fewer touchpoints, tighter agendas, written updates."
    });
  } else if (topDomainId === "energy") {
    moves.push({
      icon: "fa-gauge-high",
      title: "Treat this as a capacity problem",
      desc: "Adjust what you promise, not just how hard you push. The fastest fix is to reduce strain + protect sleep."
    });
  }

  moves.slice(0,3).forEach(m => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="card-icon"><i class="fa-solid ${m.icon}"></i></div>
      <div class="card-title">${m.title}</div>
      <div class="card-desc">${m.desc}</div>
    `;
    grid.appendChild(card);
  });
}

function buildTools(pct, byDomain){
  const grid = document.getElementById("toolsGrid");
  grid.innerHTML = "";

  const tools = [
    {
      icon: "fa-layer-group",
      title: "Overload Reduction Planner",
      desc: "Find the real pressure source (scope creep, false urgency, stakeholder pull) and cut the right load.",
      link: "overload-capacity-planners.html"
    },
    {
      icon: "fa-bolt",
      title: "Energy & Capacity Planner",
      desc: "Plan your week around real energy and friction, not an imaginary ‘unlimited capacity’ version of you.",
      link: "overload-capacity-planners.html#energy"
    }
  ];

  if ((byDomain.recovery?.pct ?? 0) >= 50 || pct >= 50) {
    tools.push({
      icon: "fa-shield",
      title: "Boundary Framework",
      desc: "Install one protection move that changes your week (without sounding defensive or emotional).",
      link: "boundary-framework.html"
    });
  } else {
    tools.push({
      icon: "fa-file-lines",
      title: "Evidence & Documentation Framework",
      desc: "If strain is being caused by behaviour, scope manipulation, or shifting expectations, document it cleanly.",
      link: "evidence-documentation-framework.html"
    });
  }

  tools.slice(0,3).forEach(t => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="card-icon"><i class="fa-solid ${t.icon}"></i></div>
      <div class="card-title">${t.title}</div>
      <div class="card-desc">${t.desc}</div>
      <a class="card-link" href="${t.link}">Open tool <i class="fa-solid fa-arrow-right"></i></a>
    `;
    grid.appendChild(card);
  });
}

/* =========================================================
   COPY + RESET
========================================================= */
function safeClipboardWrite(text){
  if (navigator.clipboard && window.isSecureContext) return navigator.clipboard.writeText(text);

  return new Promise((resolve) => {
    const ta = document.createElement("textarea");
    ta.value = text;
    ta.style.position = "fixed";
    ta.style.left = "-9999px";
    ta.style.top = "-9999px";
    document.body.appendChild(ta);
    ta.focus();
    ta.select();
    try { document.execCommand("copy"); } catch(e) {}
    document.body.removeChild(ta);
    resolve();
  });
}

function copySummary(){
  const totals = computeTotals();
  const all = getAllQuestions();
  const pct = totals.pct;
  const band = riskBand(pct);

  let out = `BURNOUT WARNING ASSESSMENT (0–10 sliders)\n`;
  out += `=====================================\n\n`;
  out += `Score: ${pct}% (${band.label})\n`;
  out += `Answered: ${totals.answeredCount}/${all.length}\n\n`;

  out += `Domain Breakdown:\n`;
  DOMAINS.forEach(d => {
    out += `- ${d.title}: ${totals.byDomain[d.id].pct}%\n`;
  });

  out += `\nResponses:\n`;
  DOMAINS.forEach(d => {
    out += `\n${d.title}\n`;
    d.questions.forEach(q => {
      const v = (typeof state[q.id] === "number") ? state[q.id] : null;
      out += `- ${stripHtml(q.text)} — ${v === null ? "Not answered" : (v + "/10")}\n`;
    });
  });

  const summaryOn = document.getElementById("summarySection").classList.contains("active");
  if (summaryOn) {
    out += `\n\nInterpretation:\n- ${band.meaning}\n`;
    out += `\nRed Flags:\n`;
    document.querySelectorAll("#redFlagsGrid .card-title").forEach(el => out += `- ${el.textContent}\n`);
    out += `\nNext Moves:\n`;
    document.querySelectorAll("#nextMovesGrid .card-title").forEach(el => out += `- ${el.textContent}\n`);
  }

  safeClipboardWrite(out);

  const btn = document.getElementById("btnCopy");
  const original = btn.innerHTML;
  btn.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
  setTimeout(() => btn.innerHTML = original, 1400);
}

function resetAssessment(){
  state = {};
  saveState();
  renderAssessment();
  updateScore();

  document.getElementById("summarySection").classList.remove("active");

  const btn = document.getElementById("btnReset");
  const original = btn.innerHTML;
  btn.innerHTML = '<i class="fa-solid fa-check"></i> Reset';
  setTimeout(() => btn.innerHTML = original, 1100);
}

function stripHtml(html){
  const div = document.createElement("div");
  div.innerHTML = html;
  return div.textContent || div.innerText || "";
}

/* =========================================================
   STORAGE
========================================================= */
function saveState(){
  try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } catch(e) {}
}
function loadState(){
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) state = JSON.parse(raw) || {};
  } catch(e) { state = {}; }
}

/* =========================================================
   PLAN BUILDER
========================================================= */
function wireSlider(sliderId, valueId){
  const slider = document.getElementById(sliderId);
  const value = document.getElementById(valueId);
  if (!slider || !value) return;
  value.textContent = slider.value;
  slider.addEventListener("input", () => value.textContent = slider.value);
}

function generatePlan(){
  const sit = (document.getElementById("sitSentence").value || "").trim();
  const drivers = (document.getElementById("drivers").value || "").trim();
  const sleepDebt = +document.getElementById("sleepDebt").value;
  const emoLoad = +document.getElementById("emoLoad").value;
  const protect = (document.getElementById("protectionMove").value || "").trim();
  const recovery = (document.getElementById("recoveryRule").value || "").trim();
  const who = document.getElementById("whoWith").value;
  const opener = (document.getElementById("opener").value || "").trim();
  const plan = (document.getElementById("twoWeekPlan").value || "").trim();

  const strainIndex = Math.round(((sleepDebt + emoLoad) / 20) * 100);
  const urgency = (strainIndex >= 70) ? "HIGH" : (strainIndex >= 45 ? "MEDIUM" : "LOW");

  const defaultProtect = protect || "Choose one protected focus/recovery block and defend it like a deadline.";
  const defaultRecovery = recovery || "Pick one daily recovery anchor (lunch off-screen, 20-min walk, or hard stop time).";

  const suggestions = getPlanSuggestions(strainIndex);

  const output =
`BURNOUT PROTECTION PLAN (2 WEEKS)
================================

1) Situation (one sentence)
${sit ? `- ${sit}` : `- Not written yet. Write it in one sentence to stop the problem staying vague.`}

2) Strain Index (quick reality check)
- Sleep debt: ${sleepDebt}/10
- Emotional load: ${emoLoad}/10
- Strain Index: ${strainIndex}% (urgency: ${urgency})

3) What’s driving this (top 3)
${drivers ? `- ${drivers}` : `- Not listed yet. If you don’t name the drivers, you’ll try to fix symptoms instead.`}

4) Non-negotiable protection move (this changes the week)
- ${defaultProtect}

5) One recovery rule (this prevents the crash)
- ${defaultRecovery}

6) Operating rule (stops false urgency)
- ${suggestions.rule}

7) If a conversation is needed
- With: ${who}
- Opener (3 lines):
${opener ? opener : `1) “I want to align on priorities for the next two weeks.”
2) “Right now workload is exceeding capacity and it’s creating risk.”
3) “I need to agree what we pause/de-scope, and what ‘good’ looks like for the top deliverable.”`}

8) Two-week plan (simple + executable)
${plan ? plan : `Week 1: Choose 1 must-win outcome, reduce meetings/interruptions, protect one recovery anchor daily.
Week 2: Stabilise delivery, tighten boundaries, prevent rework by defining “good” early, keep the recovery rule.`}

Bottom line:
Your goal is not to “cope better”. It’s to reduce the pressure source, protect capacity, and make the plan match the body you actually have right now.`;

  document.getElementById("planBox").textContent = output;
  const box = document.getElementById("planOutput");
  box.classList.add("active");
  box.scrollIntoView({ behavior: "smooth" });
}

function getPlanSuggestions(strainIndex){
  if (strainIndex >= 70) {
    return { rule: "Hard boundary on inputs: priority confirmation happens at set times (e.g., 11:30 + 16:30). No continuous reactivity." };
  }
  if (strainIndex >= 45) {
    return { rule: "2-tier list: 1 must-win outcome + 3 support tasks. Everything else is delayed, delegated, or renegotiated." };
  }
  return { rule: "Midweek 10-minute reset: check scope creep, stakeholder pulls, and what you’re silently absorbing." };
}

function copyPlan(){
  const box = document.getElementById("planBox");
  if (!box.textContent.trim()) generatePlan();
  safeClipboardWrite(document.getElementById("planBox").textContent);

  const btn = document.getElementById("planCopyBtn");
  const original = btn.innerHTML;
  btn.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
  setTimeout(() => btn.innerHTML = original, 1400);
}

function resetPlan(){
  ["sitSentence","drivers","protectionMove","recoveryRule","opener","twoWeekPlan"].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = "";
  });
  document.getElementById("sleepDebt").value = 5;
  document.getElementById("emoLoad").value = 5;
  document.getElementById("sleepDebtVal").textContent = "5";
  document.getElementById("emoLoadVal").textContent = "5";
  document.getElementById("whoWith").value = "My manager";
  document.getElementById("planOutput").classList.remove("active");

  const btn = document.getElementById("planResetBtn");
  const original = btn.innerHTML;
  btn.innerHTML = '<i class="fa-solid fa-check"></i> Reset';
  setTimeout(() => btn.innerHTML = original, 1100);
}
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="assets/supabaseClient.js"></script>
<script src="assets/accessControl.js"></script>
</body>
</html>


